import{u as T,r as h,V as D,z as b,W as E,X as k,Y as M,M as N,l as S,Z as q}from"./framework.NwtUIcuv.js";function F(e){return E()?(k(e),!0):!1}function g(e){return typeof e=="function"?e():T(e)}const $=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const C=()=>{};function L(e,n=1e3,f={}){const{immediate:o=!0,immediateCallback:a=!1}=f;let t=null;const r=h(!1);function u(){t&&(clearInterval(t),t=null)}function i(){r.value=!1,u()}function s(){const l=g(n);l<=0||(r.value=!0,a&&e(),u(),r.value&&(t=setInterval(e,l)))}if(o&&$&&s(),D(n)||typeof n=="function"){const l=b(n,()=>{r.value&&$&&s()});F(l)}return F(i),{isActive:r,pause:i,resume:s}}function z(e,n,f){let o;D(f)?o={evaluating:f}:o={};const{lazy:a=!1,evaluating:t=void 0,shallow:r=!0,onError:u=C}=o,i=h(!a),s=r?M(n):h(n);let l=0;return N(async v=>{if(!i.value)return;l++;const d=l;let p=!1;t&&Promise.resolve().then(()=>{t.value=!0});try{const y=await e(x=>{v(()=>{t&&(t.value=!1),p||x()})});d===l&&(s.value=y)}catch(y){u(y)}finally{t&&d===l&&(t.value=!1),p=!0}}),a?S(()=>(i.value=!0,s.value)):s}const V=$?window:void 0;function W(e,n={}){const{immediate:f=!0,fpsLimit:o=void 0,window:a=V}=n,t=h(!1),r=o?1e3/o:null;let u=0,i=null;function s(d){if(!t.value||!a)return;u||(u=d);const p=d-u;if(r&&p<r){i=a.requestAnimationFrame(s);return}u=d,e({delta:p,timestamp:d}),i=a.requestAnimationFrame(s)}function l(){!t.value&&a&&(t.value=!0,u=0,i=a.requestAnimationFrame(s))}function v(){t.value=!1,i!=null&&a&&(a.cancelAnimationFrame(i),i=null)}return f&&l(),F(v),{isActive:q(t),pause:v,resume:l}}function _(e={}){const{controls:n=!1,interval:f="requestAnimationFrame"}=e,o=h(new Date),a=()=>o.value=new Date,t=f==="requestAnimationFrame"?W(a,{immediate:!0}):L(a,f,{immediate:!0});return n?{now:o,...t}:o}const R=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],U={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,n)=>e===1?n?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,n)=>e===1?n?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,n)=>e===1?n?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,n)=>e===1?n?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function j(e){return e.toISOString().slice(0,10)}function P(e,n={}){const{controls:f=!1,updateInterval:o=3e4}=n,{now:a,...t}=_({interval:o,controls:!0}),r=S(()=>G(new Date(g(e)),n,g(a)));return f?{timeAgo:r,...t}:r}function G(e,n={},f=Date.now()){var o;const{max:a,messages:t=U,fullDateFormatter:r=j,units:u=R,showSecond:i=!1,rounding:s="round"}=n,l=typeof s=="number"?c=>+c.toFixed(s):Math[s],v=+f-+e,d=Math.abs(v);function p(c,m){return l(Math.abs(c)/m.value)}function y(c,m){const A=p(c,m),w=c>0,I=x(m.name,A,w);return x(w?"past":"future",I,w)}function x(c,m,A){const w=t[c];return typeof w=="function"?w(m,A):w.replace("{0}",m.toString())}if(d<6e4&&!i)return t.justNow;if(typeof a=="number"&&d>a)return r(new Date(e));if(typeof a=="string"){const c=(o=u.find(m=>m.name===a))==null?void 0:o.max;if(c&&d>c)return r(new Date(e))}for(const[c,m]of u.entries()){if(p(v,m)<=0&&u[c-1])return y(v,u[c-1]);if(d<m.max)return y(v,m)}return t.invalid}export{z as c,P as u};
