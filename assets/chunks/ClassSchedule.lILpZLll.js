import{l as R,F as Z,G as $}from"./theme.D_6HZU1e.js";import{u as B}from"./useHash.CltOi9vk.js";import{t as h,c as O,n as E,s as U,m as W,a as Y,b as L,f as p}from"./format.CHl3EdWp.js";import{r as F,o as G,n as V,a as g,c as D,b as u,t as f,u as d,F as y,C as v,D as T,E as q,d as A}from"./framework.CUSdZfs-.js";function J(n,e,t){const r=h(n,t==null?void 0:t.in);return isNaN(e)?O(n,NaN):(e&&r.setDate(r.getDate()+e),r)}function j(n,e){const t=h(n,e==null?void 0:e.in).getDay();return t===0||t===6}function I(n,e,t){const[r,a]=E(t==null?void 0:t.in,n,e);return+U(r)==+U(a)}function K(n,e){return h(n,e==null?void 0:e.in).getDate()===1}function z(n,e){const t=()=>O(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,a=ee(n);let o;if(a.date){const s=te(a.date,r);o=ne(s.restDateString,s.year)}if(!o||isNaN(+o))return t();const m=+o;let c=0,i;if(a.time&&(c=re(a.time),isNaN(c)))return t();if(a.timezone){if(i=ae(a.timezone),isNaN(i))return t()}else{const s=new Date(m+c),l=h(0,e==null?void 0:e.in);return l.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),l.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),l}return h(m+c+i,e==null?void 0:e.in)}const N={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},P=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Q=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,X=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ee(n){const e={},t=n.split(N.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],N.timeZoneDelimiter.test(e.date)&&(e.date=n.split(N.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const a=N.timezone.exec(r);a?(e.time=r.replace(a[1],""),e.timezone=a[1]):e.time=r}return e}function te(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?a:o*100,restDateString:n.slice((r[1]||r[2]).length)}}function ne(n,e){if(e===null)return new Date(NaN);const t=n.match(P);if(!t)return new Date(NaN);const r=!!t[4],a=x(t[1]),o=x(t[2])-1,m=x(t[3]),c=x(t[4]),i=x(t[5])-1;if(r)return oe(e,c,i)?se(e,c,i):new Date(NaN);{const s=new Date(0);return!le(e,o,m)||!ue(e,a)?new Date(NaN):(s.setUTCFullYear(e,o,Math.max(a,m)),s)}}function x(n){return n?parseInt(n):1}function re(n){const e=n.match(Q);if(!e)return NaN;const t=_(e[1]),r=_(e[2]),a=_(e[3]);return ce(t,r,a)?t*W+r*Y+a*1e3:NaN}function _(n){return n&&parseFloat(n.replace(",","."))||0}function ae(n){if(n==="Z")return 0;const e=n.match(X);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return de(r,a)?t*(r*W+a*Y):NaN}function se(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const a=r.getUTCDay()||7,o=(e-1)*7+t+1-a;return r.setUTCDate(r.getUTCDate()+o),r}const ie=[31,null,31,30,31,30,31,31,30,31,30,31];function H(n){return n%400===0||n%4===0&&n%100!==0}function le(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(ie[e]||(H(n)?29:28))}function ue(n,e){return e>=1&&e<=(H(n)?366:365)}function oe(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function ce(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function de(n,e){return e>=0&&e<=59}const fe={class:"flex flex-col gap-0"},me={class:"text-lg mb-4 mx-2"},ge={class:"grid grid-cols-7 gap-2 mb-8 not-prose overflow-x-scroll font-mono mx-2"},De={class:"text-sm font-semibold"},xe={key:0},he=["href"],pe={class:"text-xs font-bold bg-orange rounded p-1"},Ne={class:"text-sm"},ye=7,ve=5,ke={__name:"ClassSchedule",setup(n){const e=R("https://schooldb.chromatone.center/").with(Z()),t=F([]);G(async()=>{t.value=await e.request($("classes",{fields:["*","module.title","course.level","course.program.slug","course.program.color"]}))});const r=F(L(new Date,{weekStartsOn:0})),a=V(()=>Array.from({length:ye*ve},(c,i)=>J(r.value,i))),o=c=>t.value.filter(i=>I(z(i.date||""),c)),m=B();return(c,i)=>(g(),D("div",fe,[i[1]||(i[1]=u("p",null,"Class - 1 hour guided group education session",-1)),i[2]||(i[2]=u("ul",{class:"m-0"},[u("li",null,"20 min presentation"),u("li",null,"20 min discovery"),u("li",null,"20 min performance")],-1)),i[3]||(i[3]=u("div",{class:"text-2xl mt-8 mx-2"},"Class Schedule",-1)),i[4]||(i[4]=u("div",{class:"text-xl op-50 mx-2"},"Weekly classes",-1)),u("div",me,"Starting "+f(d(p)(r.value,"dd/MM/yy")),1),u("div",ge,[(g(),D(y,null,v(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=>u("div",{class:T(["rounded font-bold bg-gray-400 p-2",{"bg-orange-300":["Sat","Sun"].includes(s)}]),key:s},f(s),3)),64)),(g(!0),D(y,null,v(a.value,s=>(g(),D("div",{class:T(["rounded p-1 bg-light-50 flex flex-col gap-1",{"bg-orange-300":d(I)(s,Date.now()),"bg-light-900":d(j)(s),"op-50":o(s).length==0}]),key:s},[u("div",De,f(d(p)(s,"dd"))+" "+f(d(K)(s)?d(p)(s,"MMM"):""),1),t.value?(g(),D("ul",xe,[(g(!0),D(y,null,v(o(s),l=>{var C,b,k,w,S,M;return g(),D("li",{class:"text-sm rounded",key:l.title},[u("a",{class:T(["flex flex-wrap items-center gap-1 items-start bg-light-500 rounded p-1",{"bg-orange-200":l.id==d(m)}]),href:`/classes/#${l.id}`},[u("div",pe,f(d(p)(d(z)(l.date),"HH:mm")),1),i[0]||(i[0]=u("div",{class:"flex-1"},null,-1)),u("div",Ne,f((C=l==null?void 0:l.module)==null?void 0:C.title),1),u("div",{class:"text-10px uppercase px-1 rounded font-bold",style:q({backgroundColor:(k=(b=l==null?void 0:l.course)==null?void 0:b.program)==null?void 0:k.color})},f((S=(w=l==null?void 0:l.course)==null?void 0:w.program)==null?void 0:S.slug)+" "+f((M=l==null?void 0:l.course)==null?void 0:M.level),5)],10,he)])}),128))])):A("",!0)],2))),128))])]))}};export{ke as _};
