import{E as u,o as x,a as o,c as i,b as s,t as a,p as _,q as m,d as g,F as d,C as v,D as b,u as r,Y as h}from"./framework.UKybSiHu.js";import{u as w}from"./useWS.bn5XMv6x.js";import{a as y}from"./theme.CIUya4UY.js";import{u as k}from"./useHash.pC7c8Kgz.js";const C={class:"text-2xl flex p-2 mt-8"},B={class:"op-80"},N={class:"flex gap-4 py-8 p-4 max-w-100vw overflow-x-scroll"},E={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},S=["href"],T={class:"text-2xl flex flex-wrap items-baseline gap-2"},V={class:"op-70"},j={class:"px-2 py-1 bg-light-900 rounded-lg text-sm"},q={class:"flex w-full"},A={class:"text-sm"},D={class:"text-left p-2 rounded-xl shadow bg-orange-200 self-start"},F={class:"op-80"},H={class:"font-bold"},W={__name:"CourseList",setup(L){const{ws:c}=w(),l=u([]);x(async()=>{const{subscription:n}=await c.subscribe("courses",{uid:"courses-list-sub",query:{sort:["start_date"],fields:["*","program.title","classes.*","classes.module.title"]}});for await(const e of n)switch(e.event){case"init":Object.assign(l,e.data);break;case"update":e.data.forEach(t=>Object.assign(l.find(f=>f.id==t.id),t));break}});const p=k();return(n,e)=>(o(),i(d,null,[s("div",C,[e[0]||(e[0]=s("div",{class:"font-bold"},"Available courses",-1)),e[1]||(e[1]=s("div",{class:"flex-1"},null,-1)),s("div",B,a(l.length),1)]),s("div",N,[_(h,{name:"fade"},{default:m(()=>[l.length==0?(o(),i("div",E)):g("",!0),(o(!0),i(d,null,v(l,t=>(o(),i("a",{class:b(["no-underline shadow-lg p-4 flex flex-col rounded-xl gap-2 flex-1",{[t.id==r(p)?"bg-orange-300":"bg-light-500"]:!0}]),style:{flex:"1 0 200px"},key:t.id,href:`/courses/#${t.id}`},[s("div",T,[s("div",V,a(t.program.title),1),s("div",j,a(t.level),1)]),s("div",q,[s("div",A,"Starts "+a(r(y)(t.start_date)),1),e[2]||(e[2]=s("div",{class:"flex-1"},null,-1))]),e[3]||(e[3]=s("div",{class:"flex-1"},null,-1)),s("button",D,[s("div",F,a(t.classes_count)+" weekly classes",1),s("div",H,a(Number(t==null?void 0:t.price))+" THB",1)])],10,S))),128))]),_:1})])],64))}};export{W as default};
