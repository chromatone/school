import{a as H,c as A,A as q,u as D,G,K}from"./theme.RQ6Fpvpg.js";import{u as N}from"./useHash.Bc53GhQs.js";import{c as P,u as e,e as n,f as c,h as s,m as S,F as u,t as a,C as V}from"./framework.l6NM6heN.js";import{f as w}from"./format.DrP95sbi.js";const j={class:"flex flex-col gap-2 p-4 bg-light-300 max-w-45ch rounded-lg mx-2 shadow-lg"},C={class:"flex gap-2 items-center"},L={class:"text-2xl"},O={class:"op-50 text-2xl"},T={class:"font-bold text-xs"},U={class:"flex gap-2"},z={class:"text-sm"},I={class:"op-50"},J={class:"flex flex-col gap-2 font-mono text-sm"},Q={class:"op-60"},R={class:"font-bold"},ss={__name:"EnrollmentPage",setup(W){const{user:d,userDB:i}=H(),F=A(async()=>d.value&&i.request(G("enrollments",{fields:["*","course.*","course.classes.date","course.classes.module.title","course.program.title","course.program.color"]})).then(t=>t||[]).catch(t=>console.log(t)));P(()=>Object.groupBy(F.value||[],t=>t.course.program.title));const m=N(),l=A(async()=>m.value&&d.value?i.request(K("enrollments",m.value,{fields:["course.*","course.classes.*","course.classes.module.title","*","course.program.title","course.program.color"]})).then(t=>t||null).catch(t=>(console.error("Error fetching enrollment:",t),!1)):null);return(t,o)=>{var p,f,x,g,v,_,h,y,E,k,b,B;return e(d)?e(l)?(n(),c(u,{key:1},[o[2]||(o[2]=s("div",{class:"text-xl op-40 m-2"},"Enrollment found",-1)),s("div",j,[s("div",C,[s("div",L,a((x=(f=(p=e(l))==null?void 0:p.course)==null?void 0:f.program)==null?void 0:x.title),1),s("div",O,a((v=(g=e(l))==null?void 0:g.course)==null?void 0:v.level),1),o[1]||(o[1]=s("div",{class:"flex-1"},null,-1)),s("div",T,a((_=e(l))==null?void 0:_.status),1)]),s("div",U,[s("div",z,"Starts on "+a(e(w)((y=(h=e(l))==null?void 0:h.course)==null?void 0:y.start_date,"EEE dd MMM yyyy")),1),s("div",I,a(e(D)((k=(E=e(l))==null?void 0:E.course)==null?void 0:k.start_date)),1)]),s("div",J,[(n(!0),c(u,null,V((B=(b=e(l))==null?void 0:b.course)==null?void 0:B.classes,r=>{var M;return n(),c("div",{class:"flex gap-2 p-1 rounded shadow bg-light-400",key:r},[s("div",Q,a(e(w)(r==null?void 0:r.date,"HH:mm EEE dd MMM yy")),1),s("div",R,a((M=r==null?void 0:r.module)==null?void 0:M.title),1)])}),128))])])],64)):(n(),c(u,{key:2},[o[3]||(o[3]=s("div",{class:"text-xl op-90 m-2"},"Enrollment not found",-1)),o[4]||(o[4]=s("a",{class:"m-2",href:"/courses/"},"Back to courses",-1))],64)):(n(),c(u,{key:0},[o[0]||(o[0]=s("div",{class:"text-2xl"},"Please login to see available enrollments",-1)),S(q,{class:"m-4"})],64))}}};export{ss as default};
