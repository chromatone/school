import{l as R,F as Z,G as $}from"./theme.D8CXJ5cn.js";import{u as B}from"./useHash.CqV2oXnC.js";import{t as x,c as z,n as E,s as F,m as O,a as Y,b as L,g as G,f as p}from"./format.DrP95sbi.js";import{r as I,d as V,c as j,e as g,f as D,h as c,t as f,u as d,F as v,C as _,D as y,E as q,j as A}from"./framework.BrT0rRHf.js";function J(r,e,t){const n=x(r,t==null?void 0:t.in);return isNaN(e)?z(r,NaN):(e&&n.setDate(n.getDate()+e),n)}function K(r,e){const t=x(r,e==null?void 0:e.in).getDay();return t===0||t===6}function M(r,e,t){const[n,a]=E(t==null?void 0:t.in,r,e);return+F(n)==+F(a)}function P(r,e){return x(r,e==null?void 0:e.in).getDate()===1}function W(r,e){const t=()=>z(e==null?void 0:e.in,NaN),n=(e==null?void 0:e.additionalDigits)??2,a=te(r);let u;if(a.date){const s=re(a.date,n);u=ne(s.restDateString,s.year)}if(!u||isNaN(+u))return t();const m=+u;let o=0,l;if(a.time&&(o=ae(a.time),isNaN(o)))return t();if(a.timezone){if(l=se(a.timezone),isNaN(l))return t()}else{const s=new Date(m+o),i=x(0,e==null?void 0:e.in);return i.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),i.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),i}return x(m+o+l,e==null?void 0:e.in)}const N={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Q=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,X=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ee=/^([+-])(\d{2})(?::?(\d{2}))?$/;function te(r){const e={},t=r.split(N.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],N.timeZoneDelimiter.test(e.date)&&(e.date=r.split(N.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){const a=N.timezone.exec(n);a?(e.time=n.replace(a[1],""),e.timezone=a[1]):e.time=n}return e}function re(r,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(t);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,u=n[2]?parseInt(n[2]):null;return{year:u===null?a:u*100,restDateString:r.slice((n[1]||n[2]).length)}}function ne(r,e){if(e===null)return new Date(NaN);const t=r.match(Q);if(!t)return new Date(NaN);const n=!!t[4],a=h(t[1]),u=h(t[2])-1,m=h(t[3]),o=h(t[4]),l=h(t[5])-1;if(n)return ce(e,o,l)?ie(e,o,l):new Date(NaN);{const s=new Date(0);return!ue(e,u,m)||!oe(e,a)?new Date(NaN):(s.setUTCFullYear(e,u,Math.max(a,m)),s)}}function h(r){return r?parseInt(r):1}function ae(r){const e=r.match(X);if(!e)return NaN;const t=T(e[1]),n=T(e[2]),a=T(e[3]);return de(t,n,a)?t*O+n*Y+a*1e3:NaN}function T(r){return r&&parseFloat(r.replace(",","."))||0}function se(r){if(r==="Z")return 0;const e=r.match(ee);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return fe(n,a)?t*(n*O+a*Y):NaN}function ie(r,e,t){const n=new Date(0);n.setUTCFullYear(r,0,4);const a=n.getUTCDay()||7,u=(e-1)*7+t+1-a;return n.setUTCDate(n.getUTCDate()+u),n}const le=[31,null,31,30,31,30,31,31,30,31,30,31];function H(r){return r%400===0||r%4===0&&r%100!==0}function ue(r,e,t){return e>=0&&e<=11&&t>=1&&t<=(le[e]||(H(r)?29:28))}function oe(r,e){return e>=1&&e<=(H(r)?366:365)}function ce(r,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function de(r,e,t){return r===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&r>=0&&r<25}function fe(r,e){return e>=0&&e<=59}const me={class:"flex flex-col gap-0"},ge={class:"text-lg mb-4 mx-2"},De={class:"grid grid-cols-7 gap-2 mb-8 not-prose overflow-x-scroll font-mono max-w-100vw"},he={class:"text-sm font-semibold"},xe={key:0,class:"flex flex-col gap-2"},Ne=["href"],pe={class:"text-xs font-bold bg-light-100 bg-op-80 rounded p-1"},ve={class:"text-sm"},_e=7,ye=5,Ce={__name:"ClassSchedule",setup(r){const e=R("https://schooldb.chromatone.center/").with(Z()),t=I([]);V(async()=>{t.value=await e.request($("classes",{fields:["*","module.title","course.level","course.program.slug","course.program.color"]}))});const n=I(L(new Date,{weekStartsOn:0})),a=j(()=>Array.from({length:_e*ye},(o,l)=>J(n.value,l))),u=o=>t.value.filter(l=>M(W(l.date||""),o)),m=B();return(o,l)=>(g(),D("div",me,[l[2]||(l[2]=c("div",{class:"text-2xl mt-8 mx-2"},"Class Schedule",-1)),c("div",ge,"Week "+f(d(G)(Date.now())),1),c("div",De,[(g(),D(v,null,_(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=>c("div",{class:y(["rounded font-bold bg-gray-400 p-2",{"bg-orange-300":["Sat","Sun"].includes(s)}]),key:s},f(s),3)),64)),(g(!0),D(v,null,_(a.value,s=>(g(),D("div",{class:y(["rounded p-1 bg-light-50 flex flex-col gap-1",{"bg-orange-300":d(M)(s,Date.now()),"bg-light-900":d(K)(s),"op-50":u(s).length==0}]),key:s},[c("div",he,f(d(p)(s,"dd"))+" "+f(d(P)(s)?d(p)(s,"MMM"):""),1),t.value?(g(),D("ul",xe,[(g(!0),D(v,null,_(u(s),i=>{var b,k,w,C,S,U;return g(),D("li",{class:"text-sm rounded",key:i.title},[c("a",{class:y(["flex flex-wrap items-center gap-1 items-start bg-light-500 rounded p-1",{"bg-orange-200":i.id==d(m)}]),href:`/classes/#${i.id}`},[c("div",pe,f(d(p)(d(W)(i.date),"HH:mm")),1),l[0]||(l[0]=c("div",{class:"flex-1"},null,-1)),c("div",{class:"text-10px uppercase px-1 rounded font-bold brightness-140 saturate-80",style:q({backgroundColor:(k=(b=i==null?void 0:i.course)==null?void 0:b.program)==null?void 0:k.color})},f((C=(w=i==null?void 0:i.course)==null?void 0:w.program)==null?void 0:C.slug)+" "+f((S=i==null?void 0:i.course)==null?void 0:S.level),5),l[1]||(l[1]=c("div",{class:"flex-1"},null,-1)),c("div",ve,f((U=i==null?void 0:i.module)==null?void 0:U.title),1)],10,Ne)])}),128))])):A("",!0)],2))),128))])]))}};export{Ce as _};
