import{$ as M,o as j,u as d,f as o,h as r,p as B,q as N,k as u,F as S,E as V,G as $,j as e,t,H as q,a0 as z}from"./framework.LcSphYQH.js";import{u as F}from"./useWS.DJpEudMs.js";import{u as G}from"./useHash.Dqu7QGEd.js";import{f as C}from"./format.DrP95sbi.js";import"./theme.rEqM_mLo.js";const L={key:0,class:"flex gap-4 py-8 overflow-x-scroll max-w-100vw min-h-40"},O={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},D=["href"],T={class:"flex w-full font-mono p-2"},W={class:"text-sm"},A={class:"text-sm"},I={class:"flex items-start gap-2"},J={class:"op-60"},K={class:"px-2 py-1 bg-light-800 rounded-lg text-xs"},P={class:"flex-1 text-lg p-2 bg-light-700"},Q={class:"flex flex-wrap gap-2 items-center p-2"},R=["src"],U={class:"p-0"},as={__name:"ClassList",setup(X){const{ws:H}=F(),i=M([]),l=G();return j(async()=>{const{subscription:m}=await H.subscribe("classes",{uid:"classes-list-sub",query:{sort:["date"],fields:["*","module.title","course.level","course.teacher.*","course.program.title","course.program.color"]}});for await(const a of m)switch(a.event){case"init":Object.assign(i,a.data);break;case"update":a.data.forEach(s=>Object.assign(i.find(n=>n.id==s.id),s));break}}),(m,a)=>d(l)?u("",!0):(o(),r("div",L,[B(z,{name:"fade"},{default:N(()=>[i.length==0?(o(),r("div",O)):u("",!0),(o(!0),r(S,null,V(i,s=>{var n,h,p,c,f,_,x,g,v,b,y,w,k,E;return o(),r("a",{class:$(["no-underline shadow-lg flex flex-col rounded-xl transition",{[d(l)==s.id?"bg-orange-200":"bg-light-200"]:!0}]),key:s.id,href:`#${s.id}`,style:{flex:"1 0 220px"}},[e("div",T,[e("div",W,t(d(C)(s.date," HH:mm EEE")),1),a[0]||(a[0]=e("div",{class:"flex-1"},null,-1)),e("div",A,t(d(C)(s.date,"dd MMM yy")),1)]),e("div",{class:"flex flex-col p-2",style:q({backgroundColor:(h=(n=s==null?void 0:s.course)==null?void 0:n.program)==null?void 0:h.color})},[e("div",I,[e("div",J,t((c=(p=s==null?void 0:s.course)==null?void 0:p.program)==null?void 0:c.title),1),e("div",K,t((f=s==null?void 0:s.course)==null?void 0:f.level),1)])],4),e("div",P,t((_=s==null?void 0:s.module)==null?void 0:_.title),1),e("div",Q,[(g=(x=s==null?void 0:s.course)==null?void 0:x.teacher)!=null&&g.avatar?(o(),r("img",{key:0,class:"rounded-full w-30px h-30px",src:`https://schooldb.chromatone.center/assets/${(b=(v=s==null?void 0:s.course)==null?void 0:v.teacher)==null?void 0:b.avatar}?width=30&height=30`},null,8,R)):u("",!0),e("div",U,t((w=(y=s==null?void 0:s.course)==null?void 0:y.teacher)==null?void 0:w.first_name)+" "+t((E=(k=s==null?void 0:s.course)==null?void 0:k.teacher)==null?void 0:E.last_name),1)])],10,D)}),128))]),_:1})]))}};export{as as default};
