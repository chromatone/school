import{u as P,c as D,A as Q,a as L,G as T,K as U}from"./theme.D_6HZU1e.js";import{u as j}from"./useHash.CltOi9vk.js";import{Q as G}from"./qrcode.vue.esm.G6iYdr8Q.js";import{a as l,c as r,u as e,F as u,b as t,g,t as o,C as _,d as K}from"./framework.CUSdZfs-.js";import{f as v}from"./format.CHl3EdWp.js";const I={class:"flex flex-col gap-2 p-4 bg-light-300 max-w-45ch rounded-lg mx-2 shadow-lg"},J={class:"flex gap-2 items-center"},O={class:"text-2xl"},R={class:"op-50 text-2xl"},W={class:"font-bold text-xs"},X={class:"flex gap-2"},Y={class:"text-sm"},Z={class:"op-50"},ss={class:"flex flex-col gap-2 font-mono text-sm"},ts={class:"op-60"},es={class:"font-bold"},os={key:2,class:"flex flex-wrap gap-1"},ls=["href"],rs={class:"flex gap-2 items-center"},as={class:"flex flex-col gap-2 flex-1"},ds={class:"text-sm uppercase font-bold"},is={class:"op-60"},cs={class:"font-bold"},us={class:"text-sm self-end",style:{"letter-spacing":"2px"}},ns={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 210 297",version:"1.1"},ms=["transform"],fs={x:"4",y:"16","font-size":"4.5"},xs={"font-weight":"bold"},hs={dx:"2"},_s={x:"4",y:"65","font-size":"4.3"},ps=["y"],vs={class:"font-bold"},gs=["y"],zs={__name:"EnrollmentPage",setup(ys){const{user:p,userDB:y}=P(),k=D(async()=>p.value&&y.request(T("enrollments",{fields:["*","course.*","course.classes.date","course.classes.module.title","course.program.title"]})).then(d=>d||[]).catch(d=>console.log(d))),w=j(),i=D(async()=>w.value&&p.value?y.request(U("enrollments",w.value,{fields:["course.*","course.classes.*","course.classes.module.title","*","course.program.title"]})).then(d=>d||null).catch(d=>(console.error("Error fetching enrollment:",d),!1)):null);return(d,a)=>{var E,M,b,z,H,B,$,A,V,C,F,N;return l(),r(u,null,[e(p)?e(i)?(l(),r(u,{key:1},[a[2]||(a[2]=t("a",{class:"m-2",href:"/enroll/#"},"Back to all enrollments",-1)),a[3]||(a[3]=t("div",{class:"text-xl op-40 m-2"},"Enrollment found",-1)),t("div",I,[t("div",J,[t("div",O,o((b=(M=(E=e(i))==null?void 0:E.course)==null?void 0:M.program)==null?void 0:b.title),1),t("div",R,o((H=(z=e(i))==null?void 0:z.course)==null?void 0:H.level),1),a[1]||(a[1]=t("div",{class:"flex-1"},null,-1)),t("div",W,o((B=e(i))==null?void 0:B.status),1)]),t("div",X,[t("div",Y,"Starts on "+o(e(v)((A=($=e(i))==null?void 0:$.course)==null?void 0:A.start_date,"EEE dd MMM yyyy")),1),t("div",Z,o(e(L)((C=(V=e(i))==null?void 0:V.course)==null?void 0:C.start_date)),1)]),t("div",ss,[(l(!0),r(u,null,_((N=(F=e(i))==null?void 0:F.course)==null?void 0:N.classes,s=>{var c;return l(),r("div",{class:"flex gap-2 p-1 rounded shadow bg-light-400",key:s},[t("div",ts,o(e(v)(s==null?void 0:s.date,"HH:mm EEE dd MMM yy")),1),t("div",es,o((c=s==null?void 0:s.module)==null?void 0:c.title),1)])}),128))])])],64)):K("",!0):(l(),r(u,{key:0},[a[0]||(a[0]=t("div",{class:"text-2xl"},"Please login to see available enrollments",-1)),g(Q,{class:"m-4"})],64)),e(p)&&!e(i)?(l(),r("div",os,[(l(!0),r(u,null,_(e(k),s=>{var c,f,x,h;return l(),r("a",{class:"border-1 rounded border-dark-200 font-mono p-2 no-underline flex flex-col gap-2 items-center",key:s,href:`/enroll/#${s==null?void 0:s.id}`},[t("div",rs,[g(G,{value:`https://school.chromatone.center/enroll/#${s==null?void 0:s.id}`,size:d.auto,"render-as":"svg"},null,8,["value","size"]),t("div",as,[t("div",ds,o((f=(c=s==null?void 0:s.course)==null?void 0:c.program)==null?void 0:f.title)+" "+o((x=s==null?void 0:s.course)==null?void 0:x.level)+" course",1),(l(!0),r(u,null,_((h=s==null?void 0:s.course)==null?void 0:h.classes,n=>{var m;return l(),r("div",{class:"flex gap-2 text-xs",key:n},[t("div",is,o(e(v)(n.date,"HH:mm EEE dd MMM yy")),1),t("div",cs,o((m=n.module)==null?void 0:m.title),1)])}),128))])]),t("div",us,o(s==null?void 0:s.id),1)],8,ls)}),128)),(l(),r("svg",ns,[(l(!0),r(u,null,_(e(k),(s,c)=>{var f,x,h,n;return l(),r("g",{key:s,transform:`translate(${c%2*105+2}, ${Math.floor(c/2)*74+2})`},[a[4]||(a[4]=t("rect",{rx:"2","stroke-width":".25",x:"1",width:"100",height:70,stroke:"#000",fill:"#fff"},null,-1)),g(G,{value:`https://school.chromatone.center/enroll/#${s==null?void 0:s.id}`,x:62,y:"21",size:36,"render-as":"svg"},null,8,["value"]),a[5]||(a[5]=t("text",{x:"4",y:"8","font-size":"6"},"Creative Multimedia School",-1)),t("text",fs,[t("tspan",xs,o((x=(f=s==null?void 0:s.course)==null?void 0:f.program)==null?void 0:x.title),1),t("tspan",hs,o((h=s==null?void 0:s.course)==null?void 0:h.level)+" course",1)]),t("text",_s,o(s==null?void 0:s.id),1),(l(!0),r(u,null,_((n=s==null?void 0:s.course)==null?void 0:n.classes,(m,S)=>{var q;return l(),r("g",{key:m},[t("text",{x:"12",y:28.5+S*8,"font-size":"4"},o(e(v)(m.date,"HH:mm EEE dd MMM yy")),9,ps),t("div",vs,o((q=m.module)==null?void 0:q.title),1),t("rect",{width:"4",height:"4",fill:"none",stroke:"black","stroke-width":".5",rx:"2",x:"5",y:25+S*8},null,8,gs)])}),128))],8,ms)}),128))]))])):K("",!0)],64)}}};export{zs as default};
