import{G as E,o as M,a as o,c as r,g as B,h as H,d as w,F as N,C as V,D as j,u as d,b as e,t as a,Z as D}from"./framework.CUSdZfs-.js";import{u as F}from"./useWS.CDnOCbZk.js";import{u as G}from"./useHash.CltOi9vk.js";import{f as y}from"./format.CHl3EdWp.js";import"./theme.D_6HZU1e.js";const L={class:"flex gap-4 py-8 overflow-x-scroll max-w-100vw"},O={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},S=["href"],$={class:"flex w-full font-mono"},q={class:"text-sm"},z={class:"text-sm"},T={class:"flex items-center gap-2 items-center"},W={class:"op-70"},Z={class:"px-2 py-1 bg-light-800 rounded-lg text-xs"},A={class:"text-lg"},I={class:"flex flex-wrap gap-2 items-center"},J=["src"],K={class:"p-0"},ss={__name:"ClassList",setup(P){const{ws:k}=F(),i=E([]),C=G();return M(async()=>{const{subscription:u}=await k.subscribe("classes",{uid:"classes-list-sub",query:{sort:["date"],fields:["*","module.title","course.level","course.teacher.*","course.program.title"]}});for await(const t of u)switch(t.event){case"init":Object.assign(i,t.data);break;case"update":t.data.forEach(s=>Object.assign(i.find(n=>n.id==s.id),s));break}}),(u,t)=>(o(),r("div",L,[B(D,{name:"fade"},{default:H(()=>[i.length==0?(o(),r("div",O)):w("",!0),(o(!0),r(N,null,V(i,s=>{var n,l,m,c,h,p,f,_,x,g,v,b;return o(),r("a",{class:j(["no-underline shadow-lg p-2 flex flex-col rounded-xl gap-2 transition",{[d(C)==s.id?"bg-orange-200":"bg-light-200"]:!0}]),key:s.id,href:`#${s.id}`,style:{flex:"1 0 220px"}},[e("div",$,[e("div",q,a(d(y)(s.date," HH:mm EEE")),1),t[0]||(t[0]=e("div",{class:"flex-1"},null,-1)),e("div",z,a(d(y)(s.date,"dd MMM yy")),1)]),e("div",T,[e("div",W,a((l=(n=s==null?void 0:s.course)==null?void 0:n.program)==null?void 0:l.title),1),e("div",Z,a((m=s==null?void 0:s.course)==null?void 0:m.level),1)]),e("div",A,a((c=s==null?void 0:s.module)==null?void 0:c.title),1),t[1]||(t[1]=e("div",{class:"flex-1"},null,-1)),e("div",I,[(p=(h=s==null?void 0:s.course)==null?void 0:h.teacher)!=null&&p.avatar?(o(),r("img",{key:0,class:"rounded-full w-30px h-30px",src:`https://schooldb.chromatone.center/assets/${(_=(f=s==null?void 0:s.course)==null?void 0:f.teacher)==null?void 0:_.avatar}?width=30&height=30`},null,8,J)):w("",!0),e("div",K,a((g=(x=s==null?void 0:s.course)==null?void 0:x.teacher)==null?void 0:g.first_name)+" "+a((b=(v=s==null?void 0:s.course)==null?void 0:v.teacher)==null?void 0:b.last_name),1)])],10,S)}),128))]),_:1})]))}};export{ss as default};
