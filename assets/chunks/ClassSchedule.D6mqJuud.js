import{l as W,F as H,G as R}from"./theme.n0hWwsmd.js";import{u as Z}from"./useHash.DWl5Tp0E.js";import{t as p,c as I,n as $,s as k,m as O,a as z,b as B,f as N}from"./format.CHl3EdWp.js";import{r as M,o as L,n as E,a as g,c as D,b as c,t as d,u as f,F as x,C as T,D as U,d as G}from"./framework.BqMAUCVn.js";function V(n,e,t){const r=p(n,t==null?void 0:t.in);return isNaN(e)?I(n,NaN):(e&&r.setDate(r.getDate()+e),r)}function F(n,e,t){const[r,a]=$(t==null?void 0:t.in,n,e);return+k(r)==+k(a)}function q(n,e){return p(n,e==null?void 0:e.in).getDate()===1}function S(n,e){const t=()=>I(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,a=K(n);let u;if(a.date){const s=P(a.date,r);u=Q(s.restDateString,s.year)}if(!u||isNaN(+u))return t();const m=+u;let o=0,l;if(a.time&&(o=X(a.time),isNaN(o)))return t();if(a.timezone){if(l=ee(a.timezone),isNaN(l))return t()}else{const s=new Date(m+o),i=p(0,e==null?void 0:e.in);return i.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),i.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),i}return p(m+o+l,e==null?void 0:e.in)}const _={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},A=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,J=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,j=/^([+-])(\d{2})(?::?(\d{2}))?$/;function K(n){const e={},t=n.split(_.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],_.timeZoneDelimiter.test(e.date)&&(e.date=n.split(_.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const a=_.timezone.exec(r);a?(e.time=r.replace(a[1],""),e.timezone=a[1]):e.time=r}return e}function P(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,u=r[2]?parseInt(r[2]):null;return{year:u===null?a:u*100,restDateString:n.slice((r[1]||r[2]).length)}}function Q(n,e){if(e===null)return new Date(NaN);const t=n.match(A);if(!t)return new Date(NaN);const r=!!t[4],a=h(t[1]),u=h(t[2])-1,m=h(t[3]),o=h(t[4]),l=h(t[5])-1;if(r)return se(e,o,l)?te(e,o,l):new Date(NaN);{const s=new Date(0);return!re(e,u,m)||!ae(e,a)?new Date(NaN):(s.setUTCFullYear(e,u,Math.max(a,m)),s)}}function h(n){return n?parseInt(n):1}function X(n){const e=n.match(J);if(!e)return NaN;const t=y(e[1]),r=y(e[2]),a=y(e[3]);return ie(t,r,a)?t*O+r*z+a*1e3:NaN}function y(n){return n&&parseFloat(n.replace(",","."))||0}function ee(n){if(n==="Z")return 0;const e=n.match(j);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return ue(r,a)?t*(r*O+a*z):NaN}function te(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const a=r.getUTCDay()||7,u=(e-1)*7+t+1-a;return r.setUTCDate(r.getUTCDate()+u),r}const ne=[31,null,31,30,31,30,31,31,30,31,30,31];function Y(n){return n%400===0||n%4===0&&n%100!==0}function re(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(ne[e]||(Y(n)?29:28))}function ae(n,e){return e>=1&&e<=(Y(n)?366:365)}function se(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function ie(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function ue(n,e){return e>=0&&e<=59}const le={class:"text-lg mb-4"},oe={class:"grid grid-cols-7 gap-2 mb-8 not-prose overflow-x-scroll font-mono mx-2"},ce={class:"text-sm font-semibold"},de={key:0},fe=["href"],me={class:"text-xs font-bold bg-orange rounded p-1"},ge={class:"text-xs uppercase op-60"},De={class:"text-sm"},he=7,Ne=5,ye={__name:"ClassSchedule",setup(n){const e=W("https://schooldb.chromatone.center/").with(H()),t=M([]);L(async()=>{t.value=await e.request(R("classes",{fields:["*","module.title","course.level","course.program.slug"]}))});const r=M(B(new Date,{weekStartsOn:0})),a=E(()=>Array.from({length:he*Ne},(o,l)=>V(r.value,l))),u=o=>t.value.filter(l=>F(S(l.date||""),o)),m=Z();return(o,l)=>(g(),D(x,null,[l[1]||(l[1]=c("h2",{class:"text-2xl mt-8"},"Class Schedule ",-1)),c("h3",le,"Starting "+d(f(N)(r.value,"dd/MM/yy")),1),c("div",oe,[(g(),D(x,null,T(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=>c("div",{class:"rounded font-bold bg-gray-400 p-2",key:s},d(s),1)),64)),(g(!0),D(x,null,T(a.value,s=>(g(),D("div",{class:U(["rounded p-1 bg-light-50 flex flex-col gap-1",{"bg-orange-300":f(F)(s,Date.now()),"op-50":u(s).length==0}]),key:s},[c("div",ce,d(f(N)(s,"dd"))+" "+d(f(q)(s)?f(N)(s,"MMM"):""),1),t.value?(g(),D("ul",de,[(g(!0),D(x,null,T(u(s),i=>{var v,C,w,b;return g(),D("li",{class:"text-sm rounded",key:i.title},[c("a",{class:U(["flex flex-wrap items-center gap-1 items-start bg-light-500 rounded p-1",{"bg-orange-200":i.id==f(m)}]),href:`/classes/#${i.id}`},[c("div",me,d(f(N)(f(S)(i.date),"HH:mm")),1),l[0]||(l[0]=c("div",{class:"flex-1"},null,-1)),c("div",ge,d((C=(v=i==null?void 0:i.course)==null?void 0:v.program)==null?void 0:C.slug)+" "+d((w=i==null?void 0:i.course)==null?void 0:w.level),1),c("div",De,d((b=i==null?void 0:i.module)==null?void 0:b.title),1)],10,fe)])}),128))])):G("",!0)],2))),128))])],64))}};export{ye as _};
