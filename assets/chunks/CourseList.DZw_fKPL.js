import{x as f,o as _,a as o,c as i,b as s,t as l,h as m,i as x,g,F as r,q as h,s as b,u as d,Q as v}from"./framework.KJHvv_yO.js";import{u as w}from"./useWS.Cm8oOPMp.js";import{u as y}from"./index.E0vseMWQ.js";import{u as k}from"./useHash.63-nVywQ.js";import"./theme.CEQJVZn5.js";const C={class:"text-2xl flex py-2 mt-8"},B={class:"op-80"},N={class:"flex flex-wrap gap-4 py-8"},S={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},T=["href"],V={class:"text-2xl flex flex-wrap items-baseline gap-2"},j={class:"op-70"},q={class:"px-2 py-1 bg-light-800 rounded-lg text-sm"},E={class:"flex w-full"},F={class:"text-sm"},H={class:"text-left p-2 rounded-xl shadow bg-light-200"},M={__name:"CourseList",setup(L){const{ws:c}=w(),a=f([]);_(async()=>{const{subscription:n}=await c.subscribe("courses",{uid:"courses-list-sub",query:{sort:["start_date"],fields:["*","program.title","classes.*","classes.module.title"]}});for await(const t of n)switch(t.event){case"init":Object.assign(a,t.data);break;case"update":t.data.forEach(e=>Object.assign(a.find(p=>p.id==e.id),e));break}});const u=k();return(n,t)=>(o(),i(r,null,[s("div",C,[t[0]||(t[0]=s("div",{class:"font-bold"},"Current courses",-1)),t[1]||(t[1]=s("div",{class:"flex-1"},null,-1)),s("div",B,l(a.length),1)]),s("div",N,[m(v,{name:"fade"},{default:x(()=>[a.length==0?(o(),i("div",S)):g("",!0),(o(!0),i(r,null,h(a,e=>(o(),i("a",{class:b(["no-underline shadow-lg p-4 flex flex-col rounded-xl bg-light-700 gap-2 flex-1",{"bg-light-500":e.id==d(u)}]),key:e.id,href:`/courses/#${e.id}`},[s("div",V,[s("div",j,l(e.program.title),1),s("div",q,l(e.level),1)]),s("div",E,[s("div",F,"Starts "+l(d(y)(e.start_date)),1),t[2]||(t[2]=s("div",{class:"flex-1"},null,-1))]),s("button",H,l(e.classes_count)+" weekly classes - 2400 THB",1)],10,T))),128))]),_:1})])],64))}};export{M as default};
