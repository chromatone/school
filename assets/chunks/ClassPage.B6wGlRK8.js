import{r as V,o as S,m as z,a as o,U as G,i as I,c as r,b as t,t as a,u as e,g as n,F as O,n as Q,T as R}from"./framework.BW-R4Th-.js";import{u as W,l as X,F as Y,K as $}from"./theme.IgXra-7C.js";import{c as A}from"./index.3cLxKqw9.js";import{f as Z}from"./format.CHl3EdWp.js";const ee={key:0,class:"flex flex-col gap-4 sticky mt-8 overflow-scroll bottom-4 left-4 right-4 bg-dark-50 p-4 rounded-3xl"},se={class:"flex flex-wrap gap-2"},te={class:"text-lg"},ae={class:"flex flex-wrap gap-2 items-center"},oe={class:"text-2xl font-bold"},re={class:"text-2xl"},le={class:"text-4xl"},ne={class:"flex flex-wrap gap-2 items-center"},ce=["src"],ie={class:"p-0"},de={key:0,class:"text-xs"},ue={key:1,class:"flex flex-wrap gap-2 p-2"},xe={__name:"ClassPage",setup(he){const l=V(window.location.hash.slice(1));S(()=>window.addEventListener("hashchange",()=>l.value=window.location.hash.slice(1))),z(()=>window.removeEventListener("hashchange"));const s=A(async()=>l.value&&await X("https://schooldb.chromatone.center/").with(Y()).request($("classes",l.value,{fields:["*","module.*","course.*","course.teacher.*","course.program.title"]})),[]),{user:d,userDB:J}=W(),u=A(async()=>d.value&&await J.request($("classes",l.value,{fields:["*","students.*","students.directus_users_id.*"]})),[]),h=V(!1);async function P(){h.value=!0}return(me,c)=>(o(),G(R,{name:"fade"},{default:I(()=>{var m,_,p,f,v,x,g,w,y,k,b,E,B,M,C,F,D,L,U,j,q,H,K,N,T;return[l.value?(o(),r("div",ee,[c[1]||(c[1]=t("a",{class:"p-4 rounded-full bg-dark-200 absolute top-2 right-2",href:"#"},[t("div",{class:"i-la-times"})],-1)),t("div",se,[t("div",te,a(e(Z)(e(s).date||Date.now(),"HH:mm EEEE dd MMMM yyyy")),1)]),t("div",ae,[t("div",oe,a((p=(_=(m=e(s))==null?void 0:m.course)==null?void 0:_.program)==null?void 0:p.title),1),t("div",re,a((v=(f=e(s))==null?void 0:f.course)==null?void 0:v.level),1)]),t("div",le,a((g=(x=e(s))==null?void 0:x.module)==null?void 0:g.title),1),t("div",ne,[(k=(y=(w=e(s))==null?void 0:w.course)==null?void 0:y.teacher)!=null&&k.avatar?(o(),r("img",{key:0,class:"rounded-full w-30px h-30px",src:`https://schooldb.chromatone.center/assets/${(B=(E=(b=e(s))==null?void 0:b.course)==null?void 0:E.teacher)==null?void 0:B.avatar}?width=30&height=30`},null,8,ce)):n("",!0),t("div",ie,a((F=(C=(M=e(s))==null?void 0:M.course)==null?void 0:C.teacher)==null?void 0:F.first_name)+" "+a((U=(L=(D=e(s))==null?void 0:D.course)==null?void 0:L.teacher)==null?void 0:U.last_name),1)]),(q=(j=e(s))==null?void 0:j.module)!=null&&q.description?(o(),r("div",de,a((K=(H=e(s))==null?void 0:H.module)==null?void 0:K.description),1)):n("",!0),(N=e(u))!=null&&N.students?(o(),r("div",ue,[(o(!0),r(O,null,Q((T=e(u))==null?void 0:T.students,i=>(o(),r("div",{class:"p-2 bg-dark-800 rounded-xl",key:i},a(i.directus_users_id.first_name)+" "+a(i.directus_users_id.last_name),1))),128))])):n("",!0),e(d)&&!h.value?(o(),r("button",{key:2,class:"p-2 shadow-lg hover-brightness-150 hover-shadow-xl bg-green-700 rounded-xl font-bold uppercase",onClick:c[0]||(c[0]=i=>P())},"Join")):n("",!0)])):n("",!0)]}),_:1}))}};export{xe as default};
