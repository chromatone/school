import{u as x,o as ce,n as ue,r as T,i as de,w as Q,a as fe,g as be,b as _e,c as Se,s as pe,d as xe,e as he,_ as ke,f as $,h as j,j as S,k as P,t as M,l as Te,m as ee,v as ne,p as q,q as ge,x as re,T as me,y as Ae,z as Ee,A as Oe,B as Ce}from"./framework.ZY-ZxBs9.js";function $e(e){return e?`/auth/login/${e}`:"/auth/login"}var G="/",je=(e,t)=>(e.endsWith(G)&&(e=e.slice(0,-1)),t.startsWith(G)||(t=G+t),e+t),z=(e,t,r)=>{let n=e.pathname===G?t:je(e.pathname,t),s=new globalThis.URL(n,e);if(r)for(let[i,a]of Object.entries(Ue(r)))if(a&&typeof a=="object"&&!Array.isArray(a))for(let[p,f]of Object.entries(a))s.searchParams.set(`${i}[${p}]`,String(f));else s.searchParams.set(i,a);return s};function Ne(e){return typeof e!="object"||!e?!1:"headers"in e&&"ok"in e&&"json"in e&&typeof e.json=="function"&&"text"in e&&typeof e.json=="function"}async function Me(e){var t;if(!(typeof e!="object"||!e)){if(Ne(e)){let r=(t=e.headers.get("Content-Type"))==null?void 0:t.toLowerCase();if(r!=null&&r.startsWith("application/json")||r!=null&&r.startsWith("application/health+json")){let n=await e.json();if(!e.ok||"errors"in n)throw n;return"data"in n?n.data:n}if(r!=null&&r.startsWith("text/html")||r!=null&&r.startsWith("text/plain")){let n=await e.text();if(!e.ok)throw n;return n}return e}if("errors"in e)throw e;return"data"in e?e.data:e}}var K=async(e,t,r=globalThis.fetch)=>(t.headers=typeof t.headers=="object"&&!Array.isArray(t.headers)?t.headers:{},r(e,t).then(n=>Me(n).catch(s=>{let i={errors:s&&typeof s=="object"&&"errors"in s?s.errors:s,response:n};return s&&typeof s=="object"&&"data"in s&&(i.data=s.data),Promise.reject(i)}))),Fe=()=>{let e=null;return{get:async()=>e,set:async t=>{e=t}}},Re={msRefreshBeforeExpires:3e4,autoRefresh:!0},Le=2**31-1,De=(e="cookie",t={})=>r=>{let n={...Re,...t},s=null,i=null,a=n.storage??Fe(),p=async()=>a.set({access_token:null,refresh_token:null,expires:null,expires_at:null}),f=async()=>{try{await s}finally{s=null}},h=async()=>{let c=await a.get();return s||!(c!=null&&c.expires_at)||c.expires_at<new Date().getTime()+n.msRefreshBeforeExpires&&m().catch(g=>{}),f()},u=async c=>{let g=c.expires??0;c.expires_at=new Date().getTime()+g,await a.set(c),n.autoRefresh&&g>n.msRefreshBeforeExpires&&g<Le&&(i&&clearTimeout(i),i=setTimeout(()=>{i=null,m().catch(w=>{})},g-n.msRefreshBeforeExpires))},m=async()=>(s=(async()=>{let c=await a.get();await p();let g={method:"POST",headers:{"Content-Type":"application/json"}};"credentials"in n&&(g.credentials=n.credentials);let w={mode:e};e==="json"&&(c!=null&&c.refresh_token)&&(w.refresh_token=c.refresh_token),g.body=JSON.stringify(w);let d=z(r.url,"/auth/refresh");return K(d.toString(),g,r.globals.fetch).then(o=>u(o).then(()=>o))})(),s);return{refresh:m,async login(c,g,w={}){await p();let d={email:c,password:g};"otp"in w&&(d.otp=w.otp),d.mode=w.mode??e;let o=$e(w.provider),l=z(r.url,o),y={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)};"credentials"in n&&(y.credentials=n.credentials);let v=await K(l.toString(),y,r.globals.fetch);return await u(v),v},async logout(){let c=await a.get(),g={method:"POST",headers:{"Content-Type":"application/json"}};"credentials"in n&&(g.credentials=n.credentials);let w={mode:e};e==="json"&&(c!=null&&c.refresh_token)&&(w.refresh_token=c.refresh_token),g.body=JSON.stringify(w);let d=z(r.url,"/auth/logout");await K(d.toString(),g,r.globals.fetch),this.stopRefreshing(),await p()},stopRefreshing(){i&&clearTimeout(i)},async getToken(){var c;return await h().catch(()=>{}),((c=await a.get())==null?void 0:c.access_token)??null},async setToken(c){return a.set({access_token:c,refresh_token:null,expires:null,expires_at:null})}}},Wt=e=>t=>{let r=e??null;return{async getToken(){return r},async setToken(n){r=n}}},se={fetch:globalThis.fetch,WebSocket:globalThis.WebSocket,URL:globalThis.URL,logger:globalThis.console},Ie=(e,t={})=>{let r=t.globals?{...se,...t.globals}:se;return{globals:r,url:new r.URL(e),with(n){return{...this,...n(this)}}}};function oe(e){return JSON.stringify({...e,type:"auth"})}var Pe=()=>JSON.stringify({type:"pong"});function*ae(){let e=1;for(;;)yield String(e),e++}var X=(e,t=1e3)=>new Promise((r,n)=>{let s=f=>{try{let h=JSON.parse(f.data);typeof h=="object"&&!Array.isArray(h)&&h!==null?(a(),r(h)):(a(),i())}catch{a(),r(f)}},i=()=>n(),a=()=>{clearTimeout(p),e.removeEventListener("message",s),e.removeEventListener("error",i),e.removeEventListener("close",i)};e.addEventListener("message",s),e.addEventListener("error",i),e.addEventListener("close",i);let p=setTimeout(()=>{a(),r(void 0)},t)}),Je={authMode:"handshake",heartbeat:!0,debug:!1,reconnect:{delay:1e3,retries:10}};function Ut(e={}){return t=>{e={...Je,...e};let r=ae(),n={code:"closed"},s={attempts:0,active:!1},i=!1,a=new Set,p=o=>"getToken"in o,f=(o,...l)=>e.debug&&t.globals.logger[o]("[Directus SDK]",...l),h=async(o,l)=>{let y=new t.globals.URL(o);if(e.authMode==="strict"&&p(l)){let v=await l.getToken();v&&y.searchParams.set("access_token",v)}return y.toString()},u=async o=>{if("url"in e)return await h(e.url,o);if(["ws:","wss:"].includes(t.url.protocol))return await h(t.url,o);let l=new t.globals.URL(t.url.toString());return l.protocol=t.url.protocol==="https:"?"wss:":"ws:",l.pathname="/websocket",await h(l,o)},m=o=>{let l=new Promise((y,v)=>{if(!e.reconnect||i)return v();if(f("info",`reconnect #${s.attempts} `+(s.attempts>=e.reconnect.retries?"maximum retries reached":`trying again in ${Math.max(100,e.reconnect.delay)}ms`)),s.active)return s.active;if(s.attempts>=e.reconnect.retries)return s.attempts=-1,v();setTimeout(()=>o.connect().then(O=>(a.forEach(_=>{o.sendMessage(_)}),O)).then(y).catch(v),Math.max(100,e.reconnect.delay))});s.attempts+=1,s.active=l.catch(()=>{}).finally(()=>{s.active=!1})},c={open:new Set([]),error:new Set([]),close:new Set([]),message:new Set([])};function g(o){return"type"in o&&"status"in o&&"error"in o&&"code"in o.error&&"message"in o.error&&o.type==="auth"&&o.status==="error"}async function w(o,l){if(n.code==="open"){if(o.error.code==="TOKEN_EXPIRED"&&(f("warn","Authentication token expired!"),p(l))){let y=await l.getToken();if(!y)throw Error("No token for re-authenticating the websocket");n.connection.send(oe({access_token:y}))}if(o.error.code==="AUTH_TIMEOUT")return n.firstMessage&&e.authMode==="public"?(f("warn",'Authentication failed! Currently the "authMode" is "public" try using "handshake" instead'),e.reconnect=!1):f("warn","Authentication timed out!"),n.connection.close();if(o.error.code==="AUTH_FAILED"){if(n.firstMessage&&e.authMode==="public")return f("warn",'Authentication failed! Currently the "authMode" is "public" try using "handshake" instead'),e.reconnect=!1,n.connection.close();f("warn","Authentication failed!")}}}let d=async o=>{for(;n.code==="open";){let l=await X(n.connection).catch(()=>{});if(l){if(g(l)){await w(l,o),n.firstMessage=!1;continue}if(e.heartbeat&&l.type==="ping"){n.connection.send(Pe()),n.firstMessage=!1;continue}c.message.forEach(y=>{n.code==="open"&&y.call(n.connection,l)}),n.firstMessage=!1}}};return{async connect(){if(i=!1,n.code==="connecting")return await n.connection;if(n.code!=="closed")throw new Error(`Cannot connect when state is "${n.code}"`);let o=this,l=await u(o);f("info",`Connecting to ${l}...`);let y=new Promise((v,O)=>{let _=!1,A=new t.globals.WebSocket(l);A.addEventListener("open",async N=>{if(f("info","Connection open."),n={code:"open",connection:A,firstMessage:!0},s.attempts=0,s.active=!1,d(o),e.authMode==="handshake"&&p(o)){let E=await o.getToken();if(!E)throw Error("No token for authenticating the websocket. Make sure to provide one or call the login() function beforehand.");A.send(oe({access_token:E}));let R=await X(A);if(R&&"type"in R&&"status"in R&&R.type==="auth"&&R.status==="ok")f("info","Authentication successful!");else return O("Authentication failed while opening websocket connection")}c.open.forEach(E=>E.call(A,N)),_=!0,v(A)}),A.addEventListener("error",N=>{f("warn","Connection errored."),c.error.forEach(E=>E.call(A,N)),A.close(),n={code:"error"},_||O(N)}),A.addEventListener("close",N=>{f("info","Connection closed."),c.close.forEach(E=>E.call(A,N)),r=ae(),n={code:"closed"},m(this),_||O(N)})});return n={code:"connecting",connection:y},y},disconnect(){i=!0,n.code==="open"&&n.connection.close()},onWebSocket(o,l){if(o==="message"){let y=function(v){if(typeof v.data!="string")return l.call(this,v);try{return l.call(this,JSON.parse(v.data))}catch{return l.call(this,v)}};return c[o].add(y),()=>c[o].delete(y)}return c[o].add(l),()=>c[o].delete(l)},sendMessage(o){if(n.code!=="open")throw new Error('Cannot send messages without an open connection. Make sure you are calling "await client.connect()".');if(typeof o=="string")return n.connection.send(o);"uid"in o||(o.uid=r.next().value),n.connection.send(JSON.stringify(o))},async subscribe(o,l={}){"uid"in l||(l.uid=r.next().value),a.add({...l,collection:o,type:"subscribe"}),n.code!=="open"&&(f("info","No connection available for subscribing!"),await this.connect()),this.sendMessage({...l,collection:o,type:"subscribe"});let y=!0;async function*v(){for(;y&&n.code==="open";){let _=await X(n.connection).catch(()=>{});if(_){if("type"in _&&"status"in _&&_.type==="subscribe"&&_.status==="error")throw _;"type"in _&&"uid"in _&&_.type==="subscription"&&_.uid===l.uid&&(yield _)}}e.reconnect&&s.active&&(await s.active,n.code==="open"&&(n.connection.send(JSON.stringify({...l,collection:o,type:"subscribe"})),yield*v()))}let O=()=>{a.delete({...l,collection:o,type:"subscribe"}),this.sendMessage({uid:l.uid,type:"unsubscribe"}),y=!1};return{subscription:v(),unsubscribe:O}}}}}function ye(e){return["directus_access","directus_activity","directus_collections","directus_comments","directus_fields","directus_files","directus_folders","directus_migrations","directus_permissions","directus_policies","directus_presets","directus_relations","directus_revisions","directus_roles","directus_sessions","directus_settings","directus_users","directus_webhooks","directus_dashboards","directus_panels","directus_notifications","directus_shares","directus_flows","directus_operations","directus_translations","directus_versions","directus_extensions"].includes(e)}var Bt=(e,t,r)=>()=>{let n=String(e);if(ye(n))throw new Error("Cannot use createItem for core collections");return{path:`/items/${n}`,params:r??{},body:JSON.stringify(t),method:"POST"}},We=e=>{let t=(r,n=[])=>{if(typeof r=="object"){let s=[];for(let i in r){let a=r[i]??[];if(Array.isArray(a))for(let p of a)s.push(t(p,[...n,i]));else if(typeof a=="object")for(let p of Object.keys(a)){let f=a[p];for(let h of f)s.push(t(h,[...n,`${i}:${p}`]))}}return s.flatMap(i=>i)}return[...n,String(r)].join(".")};return e.flatMap(r=>t(r))},Ue=e=>{let t={};Array.isArray(e.fields)&&e.fields.length>0&&(t.fields=We(e.fields).join(",")),e.filter&&Object.keys(e.filter).length>0&&(t.filter=JSON.stringify(e.filter)),e.search&&(t.search=e.search),"sort"in e&&e.sort&&(t.sort=typeof e.sort=="string"?e.sort:e.sort.join(",")),typeof e.limit=="number"&&e.limit>=-1&&(t.limit=String(e.limit)),typeof e.offset=="number"&&e.offset>=0&&(t.offset=String(e.offset)),typeof e.page=="number"&&e.page>=1&&(t.page=String(e.page)),e.deep&&Object.keys(e.deep).length>0&&(t.deep=JSON.stringify(e.deep)),e.alias&&Object.keys(e.alias).length>0&&(t.alias=JSON.stringify(e.alias)),e.aggregate&&Object.keys(e.aggregate).length>0&&(t.aggregate=JSON.stringify(e.aggregate)),e.groupBy&&e.groupBy.length>0&&(t.groupBy=e.groupBy.join(","));for(let[r,n]of Object.entries(e))r in t||(typeof n=="string"||typeof n=="number"||typeof n=="boolean"?t[r]=String(n):t[r]=JSON.stringify(n));return t},D=(e,t)=>{if(e.length===0)throw new Error(t)},te=(e,t)=>{if(ye(String(e)))throw new Error(t)},Vt=(e,t)=>()=>(D(String(e),"Collection cannot be empty"),te(e,"Cannot use readItems for core collections"),{path:`/items/${e}`,params:t??{},method:"GET"}),qt=(e,t,r)=>()=>(D(String(e),"Collection cannot be empty"),te(e,"Cannot use readItem for core collections"),D(String(t),"Key cannot be empty"),{path:`/items/${e}/${t}`,params:r??{},method:"GET"}),Be=e=>()=>({path:"/users/me",params:e??{},method:"GET"}),Gt=(e,t,r,n)=>()=>(D(String(t),"Key cannot be empty"),D(String(e),"Collection cannot be empty"),te(e,"Cannot use updateItem for core collections"),{path:`/items/${e}/${t}`,params:n??{},body:JSON.stringify(r),method:"PATCH"}),zt=(e,t,r)=>()=>(D(e,"Key cannot be empty"),{path:`/users/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"}),Ve=(e,t,r={})=>()=>({path:"/users/register",method:"POST",body:JSON.stringify({email:e,password:t,...r})}),qe={},Ge=(e={})=>t=>{let r={...qe,...e};return{async request(n){let s=n();if(s.headers||(s.headers={}),"Content-Type"in s.headers?s.headers["Content-Type"]==="multipart/form-data"&&delete s.headers["Content-Type"]:s.headers["Content-Type"]="application/json","getToken"in this&&!("Authorization"in s.headers)){let f=await this.getToken();f&&(s.headers.Authorization=`Bearer ${f}`)}let i=z(t.url,s.path,s.params),a={method:s.method??"GET",headers:s.headers??{}};"credentials"in r&&(a.credentials=r.credentials),s.body&&(a.body=s.body),s.onRequest&&(a=await s.onRequest(a)),r.onRequest&&(a=await r.onRequest(a));let p=await K(i.toString(),a,t.globals.fetch);return"onResponse"in s&&(p=await s.onResponse(p,a)),"onResponse"in e&&(p=await e.onResponse(p,a)),p}}};function H(e){return be()?(_e(e),!0):!1}function F(e){return typeof e=="function"?e():x(e)}const Y=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ze=Object.prototype.toString,Ke=e=>ze.call(e)==="[object Object]",J=()=>{},He=Ye();function Ye(){var e,t;return Y&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Qe(e,t){function r(...n){return new Promise((s,i)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(i)})}return r}const ve=e=>e();function Xe(e=ve){const t=T(!0);function r(){t.value=!1}function n(){t.value=!0}const s=(...i)=>{t.value&&e(...i)};return{isActive:fe(t),pause:r,resume:n,eventFilter:s}}function Ze(e){return Se()}function et(e,t,r={}){const{eventFilter:n=ve,...s}=r;return Q(e,Qe(n,t),s)}function tt(e,t,r={}){const{eventFilter:n,...s}=r,{eventFilter:i,pause:a,resume:p,isActive:f}=Xe(n);return{stop:et(e,t,{...s,eventFilter:i}),pause:a,resume:p,isActive:f}}function nt(e,t=!0,r){Ze()?ce(e,r):t?e():ue(e)}function rt(e,t=1e3,r={}){const{immediate:n=!0,immediateCallback:s=!1}=r;let i=null;const a=T(!1);function p(){i&&(clearInterval(i),i=null)}function f(){a.value=!1,p()}function h(){const u=F(t);u<=0||(a.value=!0,s&&e(),p(),a.value&&(i=setInterval(e,u)))}if(n&&Y&&h(),de(t)||typeof t=="function"){const u=Q(t,()=>{a.value&&Y&&h()});H(u)}return H(f),{isActive:a,pause:f,resume:h}}function Kt(e,t,r){let n;de(r)?n={evaluating:r}:n={};const{lazy:s=!1,evaluating:i=void 0,shallow:a=!0,onError:p=J}=n,f=T(!s),h=a?pe(t):T(t);let u=0;return xe(async m=>{if(!f.value)return;u++;const c=u;let g=!1;i&&Promise.resolve().then(()=>{i.value=!0});try{const w=await e(d=>{m(()=>{i&&(i.value=!1),g||d()})});c===u&&(h.value=w)}catch(w){p(w)}finally{i&&c===u&&(i.value=!1),g=!0}}),s?he(()=>(f.value=!0,h.value)):h}const U=Y?window:void 0;function I(e){var t;const r=F(e);return(t=r==null?void 0:r.$el)!=null?t:r}function W(...e){let t,r,n,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,n,s]=e,t=U):[t,r,n,s]=e,!t)return J;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const i=[],a=()=>{i.forEach(u=>u()),i.length=0},p=(u,m,c,g)=>(u.addEventListener(m,c,g),()=>u.removeEventListener(m,c,g)),f=Q(()=>[I(t),F(s)],([u,m])=>{if(a(),!u)return;const c=Ke(m)?{...m}:m;i.push(...r.flatMap(g=>n.map(w=>p(u,g,w,c))))},{immediate:!0,flush:"post"}),h=()=>{f(),a()};return H(h),h}let ie=!1;function st(e,t,r={}){const{window:n=U,ignore:s=[],capture:i=!0,detectIframe:a=!1}=r;if(!n)return J;He&&!ie&&(ie=!0,Array.from(n.document.body.children).forEach(d=>d.addEventListener("click",J)),n.document.documentElement.addEventListener("click",J));let p=!0;const f=d=>F(s).some(o=>{if(typeof o=="string")return Array.from(n.document.querySelectorAll(o)).some(l=>l===d.target||d.composedPath().includes(l));{const l=I(o);return l&&(d.target===l||d.composedPath().includes(l))}});function h(d){const o=F(d);return o&&o.$.subTree.shapeFlag===16}function u(d,o){const l=F(d),y=l.$.subTree&&l.$.subTree.children;return y==null||!Array.isArray(y)?!1:y.some(v=>v.el===o.target||o.composedPath().includes(v.el))}const m=d=>{const o=I(e);if(d.target!=null&&!(!(o instanceof Element)&&h(e)&&u(e,d))&&!(!o||o===d.target||d.composedPath().includes(o))){if(d.detail===0&&(p=!f(d)),!p){p=!0;return}t(d)}};let c=!1;const g=[W(n,"click",d=>{c||(c=!0,setTimeout(()=>{c=!1},0),m(d))},{passive:!0,capture:i}),W(n,"pointerdown",d=>{const o=I(e);p=!f(d)&&!!(o&&!d.composedPath().includes(o))},{passive:!0}),a&&W(n,"blur",d=>{setTimeout(()=>{var o;const l=I(e);((o=n.document.activeElement)==null?void 0:o.tagName)==="IFRAME"&&!(l!=null&&l.contains(n.document.activeElement))&&t(d)},0)})].filter(Boolean);return()=>g.forEach(d=>d())}function ot(e,t={}){const{immediate:r=!0,fpsLimit:n=void 0,window:s=U}=t,i=T(!1),a=n?1e3/n:null;let p=0,f=null;function h(c){if(!i.value||!s)return;p||(p=c);const g=c-p;if(a&&g<a){f=s.requestAnimationFrame(h);return}p=c,e({delta:g,timestamp:c}),f=s.requestAnimationFrame(h)}function u(){!i.value&&s&&(i.value=!0,p=0,f=s.requestAnimationFrame(h))}function m(){i.value=!1,f!=null&&s&&(s.cancelAnimationFrame(f),f=null)}return r&&u(),H(m),{isActive:fe(i),pause:m,resume:u}}const B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V="__vueuse_ssr_handlers__",at=it();function it(){return V in B||(B[V]=B[V]||{}),B[V]}function lt(e,t){return at[e]||t}function ct(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ut={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},le="vueuse-storage";function Ht(e,t,r,n={}){var s;const{flush:i="pre",deep:a=!0,listenToStorageChanges:p=!0,writeDefaults:f=!0,mergeDefaults:h=!1,shallow:u,window:m=U,eventFilter:c,onError:g=b=>{console.error(b)},initOnMounted:w}=n,d=(u?pe:T)(typeof t=="function"?t():t);if(!r)try{r=lt("getDefaultStorage",()=>{var b;return(b=U)==null?void 0:b.localStorage})()}catch(b){g(b)}if(!r)return d;const o=F(t),l=ct(o),y=(s=n.serializer)!=null?s:ut[l],{pause:v,resume:O}=tt(d,()=>A(d.value),{flush:i,deep:a,eventFilter:c});m&&p&&nt(()=>{r instanceof Storage?W(m,"storage",E):W(m,le,R),w&&E()}),w||E();function _(b,k){if(m){const C={key:e,oldValue:b,newValue:k,storageArea:r};m.dispatchEvent(r instanceof Storage?new StorageEvent("storage",C):new CustomEvent(le,{detail:C}))}}function A(b){try{const k=r.getItem(e);if(b==null)_(k,null),r.removeItem(e);else{const C=y.write(b);k!==C&&(r.setItem(e,C),_(k,C))}}catch(k){g(k)}}function N(b){const k=b?b.newValue:r.getItem(e);if(k==null)return f&&o!=null&&r.setItem(e,y.write(o)),o;if(!b&&h){const C=y.read(k);return typeof h=="function"?h(C,o):l==="object"&&!Array.isArray(C)?{...o,...C}:C}else return typeof k!="string"?k:y.read(k)}function E(b){if(!(b&&b.storageArea!==r)){if(b&&b.key==null){d.value=o;return}if(!(b&&b.key!==e)){v();try{(b==null?void 0:b.newValue)!==y.write(d.value)&&(d.value=N(b))}catch(k){g(k)}finally{b?ue(O):O()}}}}function R(b){E(b.detail)}return d}function dt(e={}){const{controls:t=!1,interval:r="requestAnimationFrame"}=e,n=T(new Date),s=()=>n.value=new Date,i=r==="requestAnimationFrame"?ot(s,{immediate:!0}):rt(s,r,{immediate:!0});return t?{now:n,...i}:n}const ft=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],pt={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function ht(e){return e.toISOString().slice(0,10)}function Yt(e,t={}){const{controls:r=!1,updateInterval:n=3e4}=t,{now:s,...i}=dt({interval:n,controls:!0}),a=he(()=>gt(new Date(F(e)),t,F(s)));return r?{timeAgo:a,...i}:a}function gt(e,t={},r=Date.now()){var n;const{max:s,messages:i=pt,fullDateFormatter:a=ht,units:p=ft,showSecond:f=!1,rounding:h="round"}=t,u=typeof h=="number"?o=>+o.toFixed(h):Math[h],m=+r-+e,c=Math.abs(m);function g(o,l){return u(Math.abs(o)/l.value)}function w(o,l){const y=g(o,l),v=o>0,O=d(l.name,y,v);return d(v?"past":"future",O,v)}function d(o,l,y){const v=i[o];return typeof v=="function"?v(l,y):v.replace("{0}",l.toString())}if(c<6e4&&!f)return i.justNow;if(typeof s=="number"&&c>s)return a(new Date(e));if(typeof s=="string"){const o=(n=p.find(l=>l.name===s))==null?void 0:n.max;if(o&&c>o)return a(new Date(e))}for(const[o,l]of p.entries()){if(g(m,l)<=0&&p[o-1])return w(m,p[o-1]);if(c<l.max)return w(m,l)}return i.invalid}const Z=T(null),L=Ie("https://schooldb.chromatone.center/").with(De("cookie",{credentials:"include",autoRefresh:!0})).with(Ge({credentials:"include"}));function we(){ce(async()=>{L.refresh(),await L.getToken()&&r()});const e=T(!1);async function t(s,i,a){s?(await L.login(i,a),r()):(await L.request(Ve(i,a)),e.value=!0)}async function r(){Z.value=await L.request(Be())}async function n(){await L.logout(),Z.value=null}return{user:Z,userDB:L,auth:t,logout:n,registered:e}}const mt={class:"bg-light-300 rounded-2xl shadow-xl overflow-hidden max-w-30ch mx-2"},yt={key:0,class:"p-4 flex flex-col gap-2"},vt={class:"flex gap-2 items-center p-2"},wt=["src"],bt={class:"flex flex-col"},_t={class:"text-2xl"},St={class:"text-xs op-50"},xt={class:"flex flex-wrap gap-2"},kt={class:"text-2xl p-4"},Tt={class:"p-2 border-2 bg-orange-400 rounded-xl mx-2 shadow-lg hover-brightness-120",type:"submit"},At={key:0,class:"bg-orange-200 mx-2 rounded-lg p-2"},Et={class:"flex gap-1 bg-light-900 p-3"},Ot={class:"op-50"},Ct={__name:"AuthForm",setup(e){const t=T(""),r=T(""),n=T(!0),{user:s,userDB:i,auth:a,logout:p,registered:f}=we();return Q(f,h=>n.value=h),(h,u)=>{var m,c,g,w;return $(),j("div",mt,[x(s)?($(),j("div",yt,[S("div",vt,[(m=x(s))!=null&&m.avatar?($(),j("img",{key:0,class:"rounded-full",src:`https://schooldb.chromatone.center/assets/${x(s).avatar}?width=50&height=50`},null,8,wt)):P("",!0),S("div",bt,[S("div",_t,M((c=x(s))==null?void 0:c.first_name)+" "+M((g=x(s))==null?void 0:g.last_name),1),S("div",St,M((w=x(s))==null?void 0:w.location),1)])]),S("div",xt,[u[5]||(u[5]=S("a",{class:"no-underline p-2 bg-light-500 rounded-lg hover-bg-light-100",href:"/student"},"My page",-1)),S("button",{class:"p-2 bg-light-500 rounded-lg hover-bg-light-100",onClick:u[0]||(u[0]=d=>x(p)())},"Logout")])])):($(),j("form",{key:1,class:"flex flex-col gap-2",onSubmit:u[4]||(u[4]=Te(d=>x(a)(n.value,t.value,r.value),["prevent","stop"]))},[S("div",kt,M(n.value?"Sign In":"Sign Up"),1),u[9]||(u[9]=S("label",{class:"px-2",for:"email"},"Email",-1)),ee(S("input",{class:"mx-2",id:"email",type:"email","onUpdate:modelValue":u[1]||(u[1]=d=>t.value=d),placeholder:"Your email"},null,512),[[ne,t.value]]),u[10]||(u[10]=S("label",{class:"px-2",for:"password"},"Password",-1)),ee(S("input",{class:"mx-2",id:"password",type:"password","onUpdate:modelValue":u[2]||(u[2]=d=>r.value=d),placeholder:"Your password"},null,512),[[ne,r.value]]),S("button",Tt,M(n.value?"LOGIN":"REGISTER"),1),q(me,{name:"fade"},{default:ge(()=>[x(f)?($(),j("div",At,[u[6]||(u[6]=re("Account successfully registered. Check your email ")),S("b",null,M(t.value),1),u[7]||(u[7]=re(" for activation link. After activation you can login at any time."))])):P("",!0)]),_:1}),S("div",Et,[S("div",Ot,M(n.value?"Don't have an account?":"Already have an account?"),1),u[8]||(u[8]=S("div",{class:"flex-1"},null,-1)),S("a",{class:"cursor-pointer underline",onClick:u[3]||(u[3]=d=>n.value=!n.value)},M(n.value?"Register":"Login"),1)])],32))])}}},$t=ke(Ct,[["__scopeId","data-v-b29e24ad"]]),jt="/smooth.svg",Nt="/photo.jpeg",Mt={class:"flex flex-wrap items-stretch w-full h-full justify-stretch relative"},Ft=["src"],Rt={key:1,class:"i-la-user"},Lt={key:0,class:"flex-1 p-4 flex gap-4 items-start flex-col"},Dt={key:0,class:"text-xl font-bold"},It={key:1,class:"w-full rounded-xl m-2",src:Nt,style:{flex:"1 0 300px"}},Pt={__name:"Layout",setup(e){const{frontmatter:t}=Ae(),r=T(!1),{user:n}=we(),s=T();return st(s,()=>{r.value=!1}),(i,a)=>{var f,h,u,m;const p=Ee("content");return $(),j("div",Mt,[S("button",{class:"op-50 fixed top-4 right-4 z-100 text-2xl p-2 rounded-full bg-light-400",onClick:a[0]||(a[0]=c=>r.value=!r.value)},[(f=x(n))!=null&&f.avatar?($(),j("img",{key:0,class:"rounded-full",src:`https://schooldb.chromatone.center/assets/${x(n).avatar}?width=40&height=40`},null,8,Ft)):($(),j("div",Rt))]),q(me,{name:"fade"},{default:ge(()=>[ee(q($t,{class:"fixed top-4 right-4 z-90",ref_key:"authModal",ref:s},null,512),[[Oe,r.value]])]),_:1}),a[2]||(a[2]=Ce('<div class="flex-1 p-4 bg-orange m-2 rounded-xl flex flex-col gap-1 max-w-50ch"><a class="flex gap-2 items-center" href="https://chromatone.center/" target="_blank"><img class="w-6 h-6" src="'+jt+'"><div class="font-bold">Chromatone</div></a><div class="flex-1 min-h-12"></div><a class="text-4xl" href="/">Creative <br>Multimedia<br> School ​</a><div class="op-80 text-sm">Place Coworking<br> <div class="op-80">Phuket, Thailand</div></div></div>',1)),(h=x(t))!=null&&h.home?P("",!0):($(),j("div",Lt,[a[1]||(a[1]=S("div",{class:"flex-1"},null,-1)),(u=x(t))!=null&&u.title?($(),j("div",Dt,M(x(t).title),1)):P("",!0)])),(m=x(t))!=null&&m.home?($(),j("img",It)):P("",!0),q(p,{class:"prose max-w-unset",style:{flex:"1 1 100%"}})])}}},Qt={Layout:Pt,enhanceApp({app:e,router:t,siteData:r}){}};export{$t as A,Ge as F,Vt as G,qt as K,Qt as R,Bt as U,zt as _,we as a,Gt as b,Kt as c,Ht as d,Ie as l,Wt as p,Yt as u,Ut as v};
