import{a0 as h,o as f,f as e,h as a,q as _,x,k as n,I as g,J as b,a1 as y,u as c,j as t,l as r,D as w,a2 as k}from"./framework.COiIuXUL.js";import{u as E}from"./useWS.BCsxS_GO.js";import{u as C}from"./useHash.CuSMECjV.js";import{f as d}from"./format.BLmWzEp7.js";import"./theme.PT4bRhoD.js";const M={class:"flex gap-4 py-8 overflow-x-scroll max-w-100vw min-h-40"},N={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},j=["href"],B=["src"],H={class:"flex w-full font-mono p-2"},S={class:"text-sm"},V={class:"text-sm"},$=["src"],q={class:"flex items-start gap-2"},z={class:"op-60"},D={class:"p-0"},L={class:"px-2 py-1 bg-light-800 rounded-lg text-xs uppercase"},W={__name:"EventsList",setup(O){const{ws:u}=E(),i=h([]),m=C();return f(async()=>{const{subscription:l}=await u.subscribe("events",{uid:"events-list-sub",query:{sort:["date"],fields:["*","module.title","course.level","course.teacher.*","course.program.title","course.program.color"]}});for await(const o of l)switch(o.event){case"init":Object.assign(i,o.data);break;case"update":o.data.forEach(s=>Object.assign(i.find(p=>p.id==s.id),s));break}}),(l,o)=>(e(),a("div",M,[_(k,{name:"fade"},{default:x(()=>[i.length==0?(e(),a("div",N)):n("",!0),(e(!0),a(g,null,b(i,s=>(e(),a("a",{class:y(["no-underline shadow-lg flex flex-col rounded-xl transition",{[c(m)==s.id?"bg-orange-200":"bg-light-200"]:!0}]),key:s.id,href:`#${s.id}`,style:{flex:"1 0 220px"}},[s!=null&&s.poster?(e(),a("img",{key:0,src:`https://schooldb.chromatone.center/assets/${s.poster}?width=400`},null,8,B)):n("",!0),t("div",H,[t("div",S,r(c(d)(s.date," HH:mm EEE")),1),o[0]||(o[0]=t("div",{class:"flex-1"},null,-1)),t("div",V,r(c(d)(s.date,"dd MMM yy")),1)]),s!=null&&s.cover?(e(),a("img",{key:1,src:`https://schooldb.chromatone.center/assets/${s.cover}?width=400`},null,8,$)):n("",!0),t("div",{class:"flex flex-col p-2 bg-cover bg-center",style:w({backgroundColor:s==null?void 0:s.color})},[t("div",q,[t("div",z,r(s==null?void 0:s.title),1),t("div",D,r(Number(s==null?void 0:s.duration))+"Â hr",1),t("div",L,r(s==null?void 0:s.type),1)])],4)],10,j))),128))]),_:1})]))}};export{W as default};
