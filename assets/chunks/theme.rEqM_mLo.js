import{u as k,o as ce,n as ue,r as T,i as fe,w as Y,a as de,g as be,b as _e,c as Se,s as pe,d as xe,e as he,_ as ke,f as M,h as N,j as _,k as Z,t as j,l as Te,m as ee,v as ne,p as q,q as ge,x as re,T as me,y as Ae,z as Ee,A as Oe}from"./framework.LcSphYQH.js";function Ce(e){return e?`/auth/login/${e}`:"/auth/login"}var V="/",$e=(e,t)=>(e.endsWith(V)&&(e=e.slice(0,-1)),t.startsWith(V)||(t=V+t),e+t),G=(e,t,r)=>{let n=e.pathname===V?t:$e(e.pathname,t),s=new globalThis.URL(n,e);if(r)for(let[a,i]of Object.entries(We(r)))if(i&&typeof i=="object"&&!Array.isArray(i))for(let[p,f]of Object.entries(i))s.searchParams.set(`${a}[${p}]`,String(f));else s.searchParams.set(a,i);return s};function je(e){return typeof e!="object"||!e?!1:"headers"in e&&"ok"in e&&"json"in e&&typeof e.json=="function"&&"text"in e&&typeof e.json=="function"}async function Me(e){var t;if(!(typeof e!="object"||!e)){if(je(e)){let r=(t=e.headers.get("Content-Type"))==null?void 0:t.toLowerCase();if(r!=null&&r.startsWith("application/json")||r!=null&&r.startsWith("application/health+json")){let n=await e.json();if(!e.ok||"errors"in n)throw n;return"data"in n?n.data:n}if(r!=null&&r.startsWith("text/html")||r!=null&&r.startsWith("text/plain")){let n=await e.text();if(!e.ok)throw n;return n}return e}if("errors"in e)throw e;return"data"in e?e.data:e}}var z=async(e,t,r=globalThis.fetch)=>(t.headers=typeof t.headers=="object"&&!Array.isArray(t.headers)?t.headers:{},r(e,t).then(n=>Me(n).catch(s=>{let a={errors:s&&typeof s=="object"&&"errors"in s?s.errors:s,response:n};return s&&typeof s=="object"&&"data"in s&&(a.data=s.data),Promise.reject(a)}))),Ne=()=>{let e=null;return{get:async()=>e,set:async t=>{e=t}}},Fe={msRefreshBeforeExpires:3e4,autoRefresh:!0},Re=2**31-1,Le=(e="cookie",t={})=>r=>{let n={...Fe,...t},s=null,a=null,i=n.storage??Ne(),p=async()=>i.set({access_token:null,refresh_token:null,expires:null,expires_at:null}),f=async()=>{try{await s}finally{s=null}},h=async()=>{let c=await i.get();return s||!(c!=null&&c.expires_at)||c.expires_at<new Date().getTime()+n.msRefreshBeforeExpires&&y().catch(g=>{}),f()},d=async c=>{let g=c.expires??0;c.expires_at=new Date().getTime()+g,await i.set(c),n.autoRefresh&&g>n.msRefreshBeforeExpires&&g<Re&&(a&&clearTimeout(a),a=setTimeout(()=>{a=null,y().catch(v=>{})},g-n.msRefreshBeforeExpires))},y=async()=>(s=(async()=>{let c=await i.get();await p();let g={method:"POST",headers:{"Content-Type":"application/json"}};"credentials"in n&&(g.credentials=n.credentials);let v={mode:e};e==="json"&&(c!=null&&c.refresh_token)&&(v.refresh_token=c.refresh_token),g.body=JSON.stringify(v);let u=G(r.url,"/auth/refresh");return z(u.toString(),g,r.globals.fetch).then(o=>d(o).then(()=>o))})(),s);return{refresh:y,async login(c,g,v={}){await p();let u={email:c,password:g};"otp"in v&&(u.otp=v.otp),u.mode=v.mode??e;let o=Ce(v.provider),l=G(r.url,o),m={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)};"credentials"in n&&(m.credentials=n.credentials);let w=await z(l.toString(),m,r.globals.fetch);return await d(w),w},async logout(){let c=await i.get(),g={method:"POST",headers:{"Content-Type":"application/json"}};"credentials"in n&&(g.credentials=n.credentials);let v={mode:e};e==="json"&&(c!=null&&c.refresh_token)&&(v.refresh_token=c.refresh_token),g.body=JSON.stringify(v);let u=G(r.url,"/auth/logout");await z(u.toString(),g,r.globals.fetch),this.stopRefreshing(),await p()},stopRefreshing(){a&&clearTimeout(a)},async getToken(){var c;return await h().catch(()=>{}),((c=await i.get())==null?void 0:c.access_token)??null},async setToken(c){return i.set({access_token:c,refresh_token:null,expires:null,expires_at:null})}}},It=e=>t=>{let r=e??null;return{async getToken(){return r},async setToken(n){r=n}}},se={fetch:globalThis.fetch,WebSocket:globalThis.WebSocket,URL:globalThis.URL,logger:globalThis.console},De=(e,t={})=>{let r=t.globals?{...se,...t.globals}:se;return{globals:r,url:new r.URL(e),with(n){return{...this,...n(this)}}}};function oe(e){return JSON.stringify({...e,type:"auth"})}var Ie=()=>JSON.stringify({type:"pong"});function*ae(){let e=1;for(;;)yield String(e),e++}var Q=(e,t=1e3)=>new Promise((r,n)=>{let s=f=>{try{let h=JSON.parse(f.data);typeof h=="object"&&!Array.isArray(h)&&h!==null?(i(),r(h)):(i(),a())}catch{i(),r(f)}},a=()=>n(),i=()=>{clearTimeout(p),e.removeEventListener("message",s),e.removeEventListener("error",a),e.removeEventListener("close",a)};e.addEventListener("message",s),e.addEventListener("error",a),e.addEventListener("close",a);let p=setTimeout(()=>{i(),r(void 0)},t)}),Pe={authMode:"handshake",heartbeat:!0,debug:!1,reconnect:{delay:1e3,retries:10}};function Pt(e={}){return t=>{e={...Pe,...e};let r=ae(),n={code:"closed"},s={attempts:0,active:!1},a=!1,i=new Set,p=o=>"getToken"in o,f=(o,...l)=>e.debug&&t.globals.logger[o]("[Directus SDK]",...l),h=async(o,l)=>{let m=new t.globals.URL(o);if(e.authMode==="strict"&&p(l)){let w=await l.getToken();w&&m.searchParams.set("access_token",w)}return m.toString()},d=async o=>{if("url"in e)return await h(e.url,o);if(["ws:","wss:"].includes(t.url.protocol))return await h(t.url,o);let l=new t.globals.URL(t.url.toString());return l.protocol=t.url.protocol==="https:"?"wss:":"ws:",l.pathname="/websocket",await h(l,o)},y=o=>{let l=new Promise((m,w)=>{if(!e.reconnect||a)return w();if(f("info",`reconnect #${s.attempts} `+(s.attempts>=e.reconnect.retries?"maximum retries reached":`trying again in ${Math.max(100,e.reconnect.delay)}ms`)),s.active)return s.active;if(s.attempts>=e.reconnect.retries)return s.attempts=-1,w();setTimeout(()=>o.connect().then(O=>(i.forEach(S=>{o.sendMessage(S)}),O)).then(m).catch(w),Math.max(100,e.reconnect.delay))});s.attempts+=1,s.active=l.catch(()=>{}).finally(()=>{s.active=!1})},c={open:new Set([]),error:new Set([]),close:new Set([]),message:new Set([])};function g(o){return"type"in o&&"status"in o&&"error"in o&&"code"in o.error&&"message"in o.error&&o.type==="auth"&&o.status==="error"}async function v(o,l){if(n.code==="open"){if(o.error.code==="TOKEN_EXPIRED"&&(f("warn","Authentication token expired!"),p(l))){let m=await l.getToken();if(!m)throw Error("No token for re-authenticating the websocket");n.connection.send(oe({access_token:m}))}if(o.error.code==="AUTH_TIMEOUT")return n.firstMessage&&e.authMode==="public"?(f("warn",'Authentication failed! Currently the "authMode" is "public" try using "handshake" instead'),e.reconnect=!1):f("warn","Authentication timed out!"),n.connection.close();if(o.error.code==="AUTH_FAILED"){if(n.firstMessage&&e.authMode==="public")return f("warn",'Authentication failed! Currently the "authMode" is "public" try using "handshake" instead'),e.reconnect=!1,n.connection.close();f("warn","Authentication failed!")}}}let u=async o=>{for(;n.code==="open";){let l=await Q(n.connection).catch(()=>{});if(l){if(g(l)){await v(l,o),n.firstMessage=!1;continue}if(e.heartbeat&&l.type==="ping"){n.connection.send(Ie()),n.firstMessage=!1;continue}c.message.forEach(m=>{n.code==="open"&&m.call(n.connection,l)}),n.firstMessage=!1}}};return{async connect(){if(a=!1,n.code==="connecting")return await n.connection;if(n.code!=="closed")throw new Error(`Cannot connect when state is "${n.code}"`);let o=this,l=await d(o);f("info",`Connecting to ${l}...`);let m=new Promise((w,O)=>{let S=!1,A=new t.globals.WebSocket(l);A.addEventListener("open",async $=>{if(f("info","Connection open."),n={code:"open",connection:A,firstMessage:!0},s.attempts=0,s.active=!1,u(o),e.authMode==="handshake"&&p(o)){let E=await o.getToken();if(!E)throw Error("No token for authenticating the websocket. Make sure to provide one or call the login() function beforehand.");A.send(oe({access_token:E}));let R=await Q(A);if(R&&"type"in R&&"status"in R&&R.type==="auth"&&R.status==="ok")f("info","Authentication successful!");else return O("Authentication failed while opening websocket connection")}c.open.forEach(E=>E.call(A,$)),S=!0,w(A)}),A.addEventListener("error",$=>{f("warn","Connection errored."),c.error.forEach(E=>E.call(A,$)),A.close(),n={code:"error"},S||O($)}),A.addEventListener("close",$=>{f("info","Connection closed."),c.close.forEach(E=>E.call(A,$)),r=ae(),n={code:"closed"},y(this),S||O($)})});return n={code:"connecting",connection:m},m},disconnect(){a=!0,n.code==="open"&&n.connection.close()},onWebSocket(o,l){if(o==="message"){let m=function(w){if(typeof w.data!="string")return l.call(this,w);try{return l.call(this,JSON.parse(w.data))}catch{return l.call(this,w)}};return c[o].add(m),()=>c[o].delete(m)}return c[o].add(l),()=>c[o].delete(l)},sendMessage(o){if(n.code!=="open")throw new Error('Cannot send messages without an open connection. Make sure you are calling "await client.connect()".');if(typeof o=="string")return n.connection.send(o);"uid"in o||(o.uid=r.next().value),n.connection.send(JSON.stringify(o))},async subscribe(o,l={}){"uid"in l||(l.uid=r.next().value),i.add({...l,collection:o,type:"subscribe"}),n.code!=="open"&&(f("info","No connection available for subscribing!"),await this.connect()),this.sendMessage({...l,collection:o,type:"subscribe"});let m=!0;async function*w(){for(;m&&n.code==="open";){let S=await Q(n.connection).catch(()=>{});if(S){if("type"in S&&"status"in S&&S.type==="subscribe"&&S.status==="error")throw S;"type"in S&&"uid"in S&&S.type==="subscription"&&S.uid===l.uid&&(yield S)}}e.reconnect&&s.active&&(await s.active,n.code==="open"&&(n.connection.send(JSON.stringify({...l,collection:o,type:"subscribe"})),yield*w()))}let O=()=>{i.delete({...l,collection:o,type:"subscribe"}),this.sendMessage({uid:l.uid,type:"unsubscribe"}),m=!1};return{subscription:w(),unsubscribe:O}}}}}function ye(e){return["directus_access","directus_activity","directus_collections","directus_comments","directus_fields","directus_files","directus_folders","directus_migrations","directus_permissions","directus_policies","directus_presets","directus_relations","directus_revisions","directus_roles","directus_sessions","directus_settings","directus_users","directus_webhooks","directus_dashboards","directus_panels","directus_notifications","directus_shares","directus_flows","directus_operations","directus_translations","directus_versions","directus_extensions"].includes(e)}var Jt=(e,t,r)=>()=>{let n=String(e);if(ye(n))throw new Error("Cannot use createItem for core collections");return{path:`/items/${n}`,params:r??{},body:JSON.stringify(t),method:"POST"}},Je=e=>{let t=(r,n=[])=>{if(typeof r=="object"){let s=[];for(let a in r){let i=r[a]??[];if(Array.isArray(i))for(let p of i)s.push(t(p,[...n,a]));else if(typeof i=="object")for(let p of Object.keys(i)){let f=i[p];for(let h of f)s.push(t(h,[...n,`${a}:${p}`]))}}return s.flatMap(a=>a)}return[...n,String(r)].join(".")};return e.flatMap(r=>t(r))},We=e=>{let t={};Array.isArray(e.fields)&&e.fields.length>0&&(t.fields=Je(e.fields).join(",")),e.filter&&Object.keys(e.filter).length>0&&(t.filter=JSON.stringify(e.filter)),e.search&&(t.search=e.search),"sort"in e&&e.sort&&(t.sort=typeof e.sort=="string"?e.sort:e.sort.join(",")),typeof e.limit=="number"&&e.limit>=-1&&(t.limit=String(e.limit)),typeof e.offset=="number"&&e.offset>=0&&(t.offset=String(e.offset)),typeof e.page=="number"&&e.page>=1&&(t.page=String(e.page)),e.deep&&Object.keys(e.deep).length>0&&(t.deep=JSON.stringify(e.deep)),e.alias&&Object.keys(e.alias).length>0&&(t.alias=JSON.stringify(e.alias)),e.aggregate&&Object.keys(e.aggregate).length>0&&(t.aggregate=JSON.stringify(e.aggregate)),e.groupBy&&e.groupBy.length>0&&(t.groupBy=e.groupBy.join(","));for(let[r,n]of Object.entries(e))r in t||(typeof n=="string"||typeof n=="number"||typeof n=="boolean"?t[r]=String(n):t[r]=JSON.stringify(n));return t},D=(e,t)=>{if(e.length===0)throw new Error(t)},te=(e,t)=>{if(ye(String(e)))throw new Error(t)},Wt=(e,t)=>()=>(D(String(e),"Collection cannot be empty"),te(e,"Cannot use readItems for core collections"),{path:`/items/${e}`,params:t??{},method:"GET"}),Ut=(e,t,r)=>()=>(D(String(e),"Collection cannot be empty"),te(e,"Cannot use readItem for core collections"),D(String(t),"Key cannot be empty"),{path:`/items/${e}/${t}`,params:r??{},method:"GET"}),Ue=e=>()=>({path:"/users/me",params:e??{},method:"GET"}),Bt=(e,t,r,n)=>()=>(D(String(t),"Key cannot be empty"),D(String(e),"Collection cannot be empty"),te(e,"Cannot use updateItem for core collections"),{path:`/items/${e}/${t}`,params:n??{},body:JSON.stringify(r),method:"PATCH"}),qt=(e,t,r)=>()=>(D(e,"Key cannot be empty"),{path:`/users/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"}),Be=(e,t,r={})=>()=>({path:"/users/register",method:"POST",body:JSON.stringify({email:e,password:t,...r})}),qe={},Ve=(e={})=>t=>{let r={...qe,...e};return{async request(n){let s=n();if(s.headers||(s.headers={}),"Content-Type"in s.headers?s.headers["Content-Type"]==="multipart/form-data"&&delete s.headers["Content-Type"]:s.headers["Content-Type"]="application/json","getToken"in this&&!("Authorization"in s.headers)){let f=await this.getToken();f&&(s.headers.Authorization=`Bearer ${f}`)}let a=G(t.url,s.path,s.params),i={method:s.method??"GET",headers:s.headers??{}};"credentials"in r&&(i.credentials=r.credentials),s.body&&(i.body=s.body),s.onRequest&&(i=await s.onRequest(i)),r.onRequest&&(i=await r.onRequest(i));let p=await z(a.toString(),i,t.globals.fetch);return"onResponse"in s&&(p=await s.onResponse(p,i)),"onResponse"in e&&(p=await e.onResponse(p,i)),p}}};function K(e){return be()?(_e(e),!0):!1}function F(e){return typeof e=="function"?e():k(e)}const H=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ge=Object.prototype.toString,ze=e=>Ge.call(e)==="[object Object]",P=()=>{},Ke=He();function He(){var e,t;return H&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Ye(e,t){function r(...n){return new Promise((s,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(a)})}return r}const we=e=>e();function Qe(e=we){const t=T(!0);function r(){t.value=!1}function n(){t.value=!0}const s=(...a)=>{t.value&&e(...a)};return{isActive:de(t),pause:r,resume:n,eventFilter:s}}function Xe(e){return Se()}function Ze(e,t,r={}){const{eventFilter:n=we,...s}=r;return Y(e,Ye(n,t),s)}function et(e,t,r={}){const{eventFilter:n,...s}=r,{eventFilter:a,pause:i,resume:p,isActive:f}=Qe(n);return{stop:Ze(e,t,{...s,eventFilter:a}),pause:i,resume:p,isActive:f}}function tt(e,t=!0,r){Xe()?ce(e,r):t?e():ue(e)}function nt(e,t=1e3,r={}){const{immediate:n=!0,immediateCallback:s=!1}=r;let a=null;const i=T(!1);function p(){a&&(clearInterval(a),a=null)}function f(){i.value=!1,p()}function h(){const d=F(t);d<=0||(i.value=!0,s&&e(),p(),i.value&&(a=setInterval(e,d)))}if(n&&H&&h(),fe(t)||typeof t=="function"){const d=Y(t,()=>{i.value&&H&&h()});K(d)}return K(f),{isActive:i,pause:f,resume:h}}function Vt(e,t,r){let n;fe(r)?n={evaluating:r}:n={};const{lazy:s=!1,evaluating:a=void 0,shallow:i=!0,onError:p=P}=n,f=T(!s),h=i?pe(t):T(t);let d=0;return xe(async y=>{if(!f.value)return;d++;const c=d;let g=!1;a&&Promise.resolve().then(()=>{a.value=!0});try{const v=await e(u=>{y(()=>{a&&(a.value=!1),g||u()})});c===d&&(h.value=v)}catch(v){p(v)}finally{a&&c===d&&(a.value=!1),g=!0}}),s?he(()=>(f.value=!0,h.value)):h}const W=H?window:void 0;function I(e){var t;const r=F(e);return(t=r==null?void 0:r.$el)!=null?t:r}function J(...e){let t,r,n,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,n,s]=e,t=W):[t,r,n,s]=e,!t)return P;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const a=[],i=()=>{a.forEach(d=>d()),a.length=0},p=(d,y,c,g)=>(d.addEventListener(y,c,g),()=>d.removeEventListener(y,c,g)),f=Y(()=>[I(t),F(s)],([d,y])=>{if(i(),!d)return;const c=ze(y)?{...y}:y;a.push(...r.flatMap(g=>n.map(v=>p(d,g,v,c))))},{immediate:!0,flush:"post"}),h=()=>{f(),i()};return K(h),h}let ie=!1;function rt(e,t,r={}){const{window:n=W,ignore:s=[],capture:a=!0,detectIframe:i=!1}=r;if(!n)return P;Ke&&!ie&&(ie=!0,Array.from(n.document.body.children).forEach(u=>u.addEventListener("click",P)),n.document.documentElement.addEventListener("click",P));let p=!0;const f=u=>F(s).some(o=>{if(typeof o=="string")return Array.from(n.document.querySelectorAll(o)).some(l=>l===u.target||u.composedPath().includes(l));{const l=I(o);return l&&(u.target===l||u.composedPath().includes(l))}});function h(u){const o=F(u);return o&&o.$.subTree.shapeFlag===16}function d(u,o){const l=F(u),m=l.$.subTree&&l.$.subTree.children;return m==null||!Array.isArray(m)?!1:m.some(w=>w.el===o.target||o.composedPath().includes(w.el))}const y=u=>{const o=I(e);if(u.target!=null&&!(!(o instanceof Element)&&h(e)&&d(e,u))&&!(!o||o===u.target||u.composedPath().includes(o))){if(u.detail===0&&(p=!f(u)),!p){p=!0;return}t(u)}};let c=!1;const g=[J(n,"click",u=>{c||(c=!0,setTimeout(()=>{c=!1},0),y(u))},{passive:!0,capture:a}),J(n,"pointerdown",u=>{const o=I(e);p=!f(u)&&!!(o&&!u.composedPath().includes(o))},{passive:!0}),i&&J(n,"blur",u=>{setTimeout(()=>{var o;const l=I(e);((o=n.document.activeElement)==null?void 0:o.tagName)==="IFRAME"&&!(l!=null&&l.contains(n.document.activeElement))&&t(u)},0)})].filter(Boolean);return()=>g.forEach(u=>u())}function st(e,t={}){const{immediate:r=!0,fpsLimit:n=void 0,window:s=W}=t,a=T(!1),i=n?1e3/n:null;let p=0,f=null;function h(c){if(!a.value||!s)return;p||(p=c);const g=c-p;if(i&&g<i){f=s.requestAnimationFrame(h);return}p=c,e({delta:g,timestamp:c}),f=s.requestAnimationFrame(h)}function d(){!a.value&&s&&(a.value=!0,p=0,f=s.requestAnimationFrame(h))}function y(){a.value=!1,f!=null&&s&&(s.cancelAnimationFrame(f),f=null)}return r&&d(),K(y),{isActive:de(a),pause:y,resume:d}}const U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B="__vueuse_ssr_handlers__",ot=at();function at(){return B in U||(U[B]=U[B]||{}),U[B]}function it(e,t){return ot[e]||t}function lt(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ct={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},le="vueuse-storage";function Gt(e,t,r,n={}){var s;const{flush:a="pre",deep:i=!0,listenToStorageChanges:p=!0,writeDefaults:f=!0,mergeDefaults:h=!1,shallow:d,window:y=W,eventFilter:c,onError:g=b=>{console.error(b)},initOnMounted:v}=n,u=(d?pe:T)(typeof t=="function"?t():t);if(!r)try{r=it("getDefaultStorage",()=>{var b;return(b=W)==null?void 0:b.localStorage})()}catch(b){g(b)}if(!r)return u;const o=F(t),l=lt(o),m=(s=n.serializer)!=null?s:ct[l],{pause:w,resume:O}=et(u,()=>A(u.value),{flush:a,deep:i,eventFilter:c});y&&p&&tt(()=>{r instanceof Storage?J(y,"storage",E):J(y,le,R),v&&E()}),v||E();function S(b,x){if(y){const C={key:e,oldValue:b,newValue:x,storageArea:r};y.dispatchEvent(r instanceof Storage?new StorageEvent("storage",C):new CustomEvent(le,{detail:C}))}}function A(b){try{const x=r.getItem(e);if(b==null)S(x,null),r.removeItem(e);else{const C=m.write(b);x!==C&&(r.setItem(e,C),S(x,C))}}catch(x){g(x)}}function $(b){const x=b?b.newValue:r.getItem(e);if(x==null)return f&&o!=null&&r.setItem(e,m.write(o)),o;if(!b&&h){const C=m.read(x);return typeof h=="function"?h(C,o):l==="object"&&!Array.isArray(C)?{...o,...C}:C}else return typeof x!="string"?x:m.read(x)}function E(b){if(!(b&&b.storageArea!==r)){if(b&&b.key==null){u.value=o;return}if(!(b&&b.key!==e)){w();try{(b==null?void 0:b.newValue)!==m.write(u.value)&&(u.value=$(b))}catch(x){g(x)}finally{b?ue(O):O()}}}}function R(b){E(b.detail)}return u}function ut(e={}){const{controls:t=!1,interval:r="requestAnimationFrame"}=e,n=T(new Date),s=()=>n.value=new Date,a=r==="requestAnimationFrame"?st(s,{immediate:!0}):nt(s,r,{immediate:!0});return t?{now:n,...a}:n}const ft=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],dt={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function pt(e){return e.toISOString().slice(0,10)}function zt(e,t={}){const{controls:r=!1,updateInterval:n=3e4}=t,{now:s,...a}=ut({interval:n,controls:!0}),i=he(()=>ht(new Date(F(e)),t,F(s)));return r?{timeAgo:i,...a}:i}function ht(e,t={},r=Date.now()){var n;const{max:s,messages:a=dt,fullDateFormatter:i=pt,units:p=ft,showSecond:f=!1,rounding:h="round"}=t,d=typeof h=="number"?o=>+o.toFixed(h):Math[h],y=+r-+e,c=Math.abs(y);function g(o,l){return d(Math.abs(o)/l.value)}function v(o,l){const m=g(o,l),w=o>0,O=u(l.name,m,w);return u(w?"past":"future",O,w)}function u(o,l,m){const w=a[o];return typeof w=="function"?w(l,m):w.replace("{0}",l.toString())}if(c<6e4&&!f)return a.justNow;if(typeof s=="number"&&c>s)return i(new Date(e));if(typeof s=="string"){const o=(n=p.find(l=>l.name===s))==null?void 0:n.max;if(o&&c>o)return i(new Date(e))}for(const[o,l]of p.entries()){if(g(y,l)<=0&&p[o-1])return v(y,p[o-1]);if(c<l.max)return v(y,l)}return a.invalid}const gt="/smooth.svg",X=T(null),L=De("https://schooldb.chromatone.center/").with(Le("cookie",{credentials:"include",autoRefresh:!0})).with(Ve({credentials:"include"}));function ve(){ce(async()=>{L.refresh(),await L.getToken()&&r()});const e=T(!1);async function t(s,a,i){s?(await L.login(a,i),r()):(await L.request(Be(a,i)),e.value=!0)}async function r(){X.value=await L.request(Ue())}async function n(){await L.logout(),X.value=null}return{user:X,userDB:L,auth:t,logout:n,registered:e}}const mt={class:"bg-light-300 rounded-2xl shadow-xl overflow-hidden max-w-30ch mx-2"},yt={key:0,class:"p-4 flex flex-col gap-2"},wt={class:"flex gap-2 items-center p-2"},vt=["src"],bt={class:"flex flex-col"},_t={class:"text-2xl"},St={class:"text-xs op-50"},xt={class:"flex flex-wrap gap-2"},kt={class:"text-2xl p-4"},Tt={class:"p-2 border-2 bg-orange-400 rounded-xl mx-2 shadow-lg hover-brightness-120",type:"submit"},At={key:0,class:"bg-orange-200 mx-2 rounded-lg p-2"},Et={class:"flex gap-1 bg-light-900 p-3"},Ot={class:"op-50"},Ct={__name:"AuthForm",setup(e){const t=T(""),r=T(""),n=T(!0),{user:s,userDB:a,auth:i,logout:p,registered:f}=ve();return Y(f,h=>n.value=h),(h,d)=>{var y,c,g,v;return M(),N("div",mt,[k(s)?(M(),N("div",yt,[_("div",wt,[(y=k(s))!=null&&y.avatar?(M(),N("img",{key:0,class:"rounded-full",src:`https://schooldb.chromatone.center/assets/${k(s).avatar}?width=50&height=50`},null,8,vt)):Z("",!0),_("div",bt,[_("div",_t,j((c=k(s))==null?void 0:c.first_name)+" "+j((g=k(s))==null?void 0:g.last_name),1),_("div",St,j((v=k(s))==null?void 0:v.location),1)])]),_("div",xt,[d[5]||(d[5]=_("a",{class:"no-underline p-2 bg-light-500 rounded-lg hover-bg-light-100",href:"/student"},"My page",-1)),_("button",{class:"p-2 bg-light-500 rounded-lg hover-bg-light-100",onClick:d[0]||(d[0]=u=>k(p)())},"Logout")])])):(M(),N("form",{key:1,class:"flex flex-col gap-2",onSubmit:d[4]||(d[4]=Te(u=>k(i)(n.value,t.value,r.value),["prevent","stop"]))},[_("div",kt,j(n.value?"Sign In":"Sign Up"),1),d[9]||(d[9]=_("label",{class:"px-2",for:"email"},"Email",-1)),ee(_("input",{class:"mx-2",id:"email",type:"email","onUpdate:modelValue":d[1]||(d[1]=u=>t.value=u),placeholder:"Your email"},null,512),[[ne,t.value]]),d[10]||(d[10]=_("label",{class:"px-2",for:"password"},"Password",-1)),ee(_("input",{class:"mx-2",id:"password",type:"password","onUpdate:modelValue":d[2]||(d[2]=u=>r.value=u),placeholder:"Your password"},null,512),[[ne,r.value]]),_("button",Tt,j(n.value?"LOGIN":"REGISTER"),1),q(me,{name:"fade"},{default:ge(()=>[k(f)?(M(),N("div",At,[d[6]||(d[6]=re("Account successfully registered. Check your email ")),_("b",null,j(t.value),1),d[7]||(d[7]=re(" for activation link. After activation you can login at any time."))])):Z("",!0)]),_:1}),_("div",Et,[_("div",Ot,j(n.value?"Don't have an account?":"Already have an account?"),1),d[8]||(d[8]=_("div",{class:"flex-1"},null,-1)),_("a",{class:"cursor-pointer underline",onClick:d[3]||(d[3]=u=>n.value=!n.value)},j(n.value?"Register":"Login"),1)])],32))])}}},$t=ke(Ct,[["__scopeId","data-v-b29e24ad"]]),jt={class:"flex flex-col items-start w-full h-full justify-stretch relative"},Mt=["src"],Nt={key:1,class:"i-la-user"},Ft={key:0,class:"p-2 op-50 flex gap-2 items-center",href:"/"},Rt={class:"p-2 text-2xl"},Lt={__name:"Layout",setup(e){const{frontmatter:t}=Ae(),r=T(!1),{user:n}=ve(),s=T();return rt(s,()=>{r.value=!1}),(a,i)=>{var f;const p=Ee("content");return M(),N("div",jt,[_("button",{class:"op-50 fixed top-4 right-4 z-100 text-2xl p-2 rounded-full bg-light-400",onClick:i[0]||(i[0]=h=>r.value=!r.value)},[(f=k(n))!=null&&f.avatar?(M(),N("img",{key:0,class:"rounded-full",src:`https://schooldb.chromatone.center/assets/${k(n).avatar}?width=40&height=40`},null,8,Mt)):(M(),N("div",Nt))]),q(me,{name:"fade"},{default:ge(()=>[ee(q($t,{class:"fixed top-4 right-4 z-90",ref_key:"authModal",ref:s},null,512),[[Oe,r.value]])]),_:1}),k(t).home?Z("",!0):(M(),N("a",Ft,i[1]||(i[1]=[_("img",{class:"w-6 h-6",src:gt},null,-1),_("div",{class:"text-lg"},"Creative Multimedia School",-1)]))),_("h1",Rt,j(k(t).title),1),q(p,{class:"prose max-w-unset flex-1"})])}}},Kt={Layout:Lt,enhanceApp({app:e,router:t,siteData:r}){}};export{$t as A,Ve as F,Wt as G,Ut as K,Kt as R,Jt as U,gt as _,ve as a,Bt as b,Vt as c,qt as d,Gt as e,De as l,It as p,zt as u,Pt as v};
