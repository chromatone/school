import{a0 as j,o as B,f as o,h as r,q as H,x as N,k,I as S,J as V,a1 as q,u as d,j as e,l as t,D as z,a2 as D}from"./framework.COiIuXUL.js";import{u as L}from"./useWS.BCsxS_GO.js";import{u as O}from"./useHash.CuSMECjV.js";import{f as C}from"./format.BLmWzEp7.js";import"./theme.PT4bRhoD.js";const $={class:"flex gap-4 py-8 overflow-x-scroll max-w-100vw min-h-40"},F={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},G=["href"],I={class:"flex w-full font-mono p-2"},J={class:"text-sm"},T={class:"text-sm"},W={class:"flex items-start gap-2"},A={class:"op-60"},K={class:"px-2 py-1 bg-light-800 rounded-lg text-xs"},P={class:"flex-1 text-lg p-2 bg-light-700"},Q={class:"flex flex-wrap gap-2 items-center p-2"},R=["src"],U={class:"p-0"},as={__name:"ClassList",setup(X){const{ws:E}=L(),i=j([]),M=O();return B(async()=>{const{subscription:u}=await E.subscribe("classes",{uid:"classes-list-sub",query:{sort:["date"],fields:["*","module.title","course.level","course.teacher.*","course.program.title","course.program.color"]}});for await(const a of u)switch(a.event){case"init":Object.assign(i,a.data);break;case"update":a.data.forEach(s=>Object.assign(i.find(n=>n.id==s.id),s));break}}),(u,a)=>(o(),r("div",$,[H(D,{name:"fade"},{default:N(()=>[i.length==0?(o(),r("div",F)):k("",!0),(o(!0),r(S,null,V(i,s=>{var n,l,m,h,p,c,f,_,x,g,v,b,w,y;return o(),r("a",{class:q(["no-underline shadow-lg flex flex-col rounded-xl transition",{[d(M)==s.id?"bg-orange-200":"bg-light-200"]:!0}]),key:s.id,href:`#${s.id}`,style:{flex:"1 0 220px"}},[e("div",I,[e("div",J,t(d(C)(s.date," HH:mm EEE")),1),a[0]||(a[0]=e("div",{class:"flex-1"},null,-1)),e("div",T,t(d(C)(s.date,"dd MMM yy")),1)]),e("div",{class:"flex flex-col p-2",style:z({backgroundColor:(l=(n=s==null?void 0:s.course)==null?void 0:n.program)==null?void 0:l.color})},[e("div",W,[e("div",A,t((h=(m=s==null?void 0:s.course)==null?void 0:m.program)==null?void 0:h.title),1),e("div",K,t((p=s==null?void 0:s.course)==null?void 0:p.level),1)])],4),e("div",P,t((c=s==null?void 0:s.module)==null?void 0:c.title),1),e("div",Q,[(_=(f=s==null?void 0:s.course)==null?void 0:f.teacher)!=null&&_.avatar?(o(),r("img",{key:0,class:"rounded-full w-30px h-30px",src:`https://schooldb.chromatone.center/assets/${(g=(x=s==null?void 0:s.course)==null?void 0:x.teacher)==null?void 0:g.avatar}?width=30&height=30`},null,8,R)):k("",!0),e("div",U,t((b=(v=s==null?void 0:s.course)==null?void 0:v.teacher)==null?void 0:b.first_name)+" "+t((y=(w=s==null?void 0:s.course)==null?void 0:w.teacher)==null?void 0:y.last_name),1)])],10,G)}),128))]),_:1})]))}};export{as as default};
