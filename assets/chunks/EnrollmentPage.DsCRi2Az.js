import{u as K,c as z,A as P,a as Q,G as S,K as $}from"./theme.n0hWwsmd.js";import{u as L}from"./useHash.DWl5Tp0E.js";import{Q as T}from"./qrcode.vue.esm.CnTCufdv.js";import{a as l,c as r,u as t,F as i,b as e,g as C,t as o,C as f,d as D}from"./framework.BqMAUCVn.js";import{f as _}from"./format.CHl3EdWp.js";const U={class:"flex flex-col gap-2 p-4 bg-light-300 max-w-45ch rounded-lg mx-2 shadow-lg"},j={class:"flex gap-2 items-center"},I={class:"text-2xl"},J={class:"op-50 text-2xl"},O={class:"font-bold text-xs"},R={class:"flex gap-2"},W={class:"text-sm"},X={class:"op-50"},Y={class:"flex flex-col gap-2 font-mono text-sm"},Z={class:"op-60"},ss={class:"font-bold"},es={key:2,class:"flex flex-wrap gap-1"},ts=["href"],os={class:"text-sm self-start"},ls={class:"flex gap-2 items-center"},rs={class:"flex flex-col gap-2 flex-1"},as={class:"text-sm uppercase font-bold"},ds={class:"op-60"},cs={class:"font-bold"},ps={__name:"EnrollmentPage",setup(is){const{user:u,userDB:p}=K(),G=z(async()=>u.value&&p.request(S("enrollments",{fields:["*","course.*","course.classes.date","course.classes.module.title","course.program.title"]})).then(a=>a||[]).catch(a=>console.log(a))),x=L(),d=z(async()=>x.value&&u.value?p.request($("enrollments",x.value,{fields:["course.*","course.classes.*","course.classes.module.title","*","course.program.title"]})).then(a=>a||null).catch(a=>(console.error("Error fetching enrollment:",a),!1)):null);return(a,c)=>{var v,h,g,y,E,b,k,M,B,H,w,A;return l(),r(i,null,[t(u)?t(d)?(l(),r(i,{key:1},[c[2]||(c[2]=e("a",{class:"m-2",href:"/enroll/#"},"Back to all enrollments",-1)),c[3]||(c[3]=e("div",{class:"text-xl op-40 m-2"},"Enrollment found",-1)),e("div",U,[e("div",j,[e("div",I,o((g=(h=(v=t(d))==null?void 0:v.course)==null?void 0:h.program)==null?void 0:g.title),1),e("div",J,o((E=(y=t(d))==null?void 0:y.course)==null?void 0:E.level),1),c[1]||(c[1]=e("div",{class:"flex-1"},null,-1)),e("div",O,o((b=t(d))==null?void 0:b.status),1)]),e("div",R,[e("div",W,"Starts on "+o(t(_)((M=(k=t(d))==null?void 0:k.course)==null?void 0:M.start_date,"EEE dd MMM yyyy")),1),e("div",X,o(t(Q)((H=(B=t(d))==null?void 0:B.course)==null?void 0:H.start_date)),1)]),e("div",Y,[(l(!0),r(i,null,f((A=(w=t(d))==null?void 0:w.course)==null?void 0:A.classes,s=>{var n;return l(),r("div",{class:"flex gap-2 p-1 rounded shadow bg-light-400",key:s},[e("div",Z,o(t(_)(s==null?void 0:s.date,"HH:mm EEE dd MMM yy")),1),e("div",ss,o((n=s==null?void 0:s.module)==null?void 0:n.title),1)])}),128))])])],64)):D("",!0):(l(),r(i,{key:0},[c[0]||(c[0]=e("div",{class:"text-2xl"},"Please login to see available enrollments",-1)),C(P,{class:"m-4"})],64)),t(u)&&!t(d)?(l(),r("div",es,[(l(!0),r(i,null,f(t(G),s=>{var n,V,F,N;return l(),r("a",{class:"border-1 rounded border-dark-200 font-mono p-2 no-underline flex flex-col gap-2 items-center",key:s,href:`/enroll/#${s==null?void 0:s.id}`},[e("div",os,o(s==null?void 0:s.id),1),e("div",ls,[C(T,{value:`https://school.chromatone.center/enroll/#${s==null?void 0:s.id}`,size:a.auto,"render-as":"svg"},null,8,["value","size"]),e("div",rs,[e("div",as,o((V=(n=s==null?void 0:s.course)==null?void 0:n.program)==null?void 0:V.title)+" "+o((F=s==null?void 0:s.course)==null?void 0:F.level),1),(l(!0),r(i,null,f((N=s==null?void 0:s.course)==null?void 0:N.classes,m=>{var q;return l(),r("div",{class:"flex gap-2 text-xs",key:m},[e("div",ds,o(t(_)(m.date,"HH:mm EEE dd MMM yy")),1),e("div",cs,o((q=m.module)==null?void 0:q.title),1)])}),128))])])],8,ts)}),128))])):D("",!0)],64)}}};export{ps as default};
