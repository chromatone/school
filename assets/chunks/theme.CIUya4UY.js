import{r as x,o as ae,_ as ie,u as k,a as C,c as O,b as _,d as Z,t as M,w as V,v as z,e as le,i as ee,f as te,g as ce,h as ue,s as de,j as fe,k as ne,l as pe,m as he,n as ge,p as B,q as me,x as ye,T as we}from"./framework.UKybSiHu.js";function ve(e){return e?`/auth/login/${e}`:"/auth/login"}var I="/",be=(e,n)=>(e.endsWith(I)&&(e=e.slice(0,-1)),n.startsWith(I)||(n=I+n),e+n),D=(e,n,o)=>{let t=e.pathname===I?n:be(e.pathname,n),s=new globalThis.URL(t,e);if(o)for(let[a,l]of Object.entries(Ce(o)))if(l&&typeof l=="object"&&!Array.isArray(l))for(let[u,f]of Object.entries(l))s.searchParams.set(`${a}[${u}]`,String(f));else s.searchParams.set(a,l);return s};function _e(e){return typeof e!="object"||!e?!1:"headers"in e&&"ok"in e&&"json"in e&&typeof e.json=="function"&&"text"in e&&typeof e.json=="function"}async function ke(e){var n;if(!(typeof e!="object"||!e)){if(_e(e)){let o=(n=e.headers.get("Content-Type"))==null?void 0:n.toLowerCase();if(o!=null&&o.startsWith("application/json")||o!=null&&o.startsWith("application/health+json")){let t=await e.json();if(!e.ok||"errors"in t)throw t;return"data"in t?t.data:t}if(o!=null&&o.startsWith("text/html")||o!=null&&o.startsWith("text/plain")){let t=await e.text();if(!e.ok)throw t;return t}return e}if("errors"in e)throw e;return"data"in e?e.data:e}}var F=async(e,n,o=globalThis.fetch)=>(n.headers=typeof n.headers=="object"&&!Array.isArray(n.headers)?n.headers:{},o(e,n).then(t=>ke(t).catch(s=>{let a={errors:s&&typeof s=="object"&&"errors"in s?s.errors:s,response:t};return s&&typeof s=="object"&&"data"in s&&(a.data=s.data),Promise.reject(a)}))),xe=()=>{let e=null;return{get:async()=>e,set:async n=>{e=n}}},Se={msRefreshBeforeExpires:3e4,autoRefresh:!0},Te=2**31-1,Ae=(e="cookie",n={})=>o=>{let t={...Se,...n},s=null,a=null,l=t.storage??xe(),u=async()=>l.set({access_token:null,refresh_token:null,expires:null,expires_at:null}),f=async()=>{try{await s}finally{s=null}},d=async()=>{let c=await l.get();return s||!(c!=null&&c.expires_at)||c.expires_at<new Date().getTime()+t.msRefreshBeforeExpires&&w().catch(g=>{}),f()},h=async c=>{let g=c.expires??0;c.expires_at=new Date().getTime()+g,await l.set(c),t.autoRefresh&&g>t.msRefreshBeforeExpires&&g<Te&&(a&&clearTimeout(a),a=setTimeout(()=>{a=null,w().catch(v=>{})},g-t.msRefreshBeforeExpires))},w=async()=>(s=(async()=>{let c=await l.get();await u();let g={method:"POST",headers:{"Content-Type":"application/json"}};"credentials"in t&&(g.credentials=t.credentials);let v={mode:e};e==="json"&&(c!=null&&c.refresh_token)&&(v.refresh_token=c.refresh_token),g.body=JSON.stringify(v);let p=D(o.url,"/auth/refresh");return F(p.toString(),g,o.globals.fetch).then(r=>h(r).then(()=>r))})(),s);return{refresh:w,async login(c,g,v={}){await u();let p={email:c,password:g};"otp"in v&&(p.otp=v.otp),p.mode=v.mode??e;let r=ve(v.provider),i=D(o.url,r),m={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)};"credentials"in t&&(m.credentials=t.credentials);let y=await F(i.toString(),m,o.globals.fetch);return await h(y),y},async logout(){let c=await l.get(),g={method:"POST",headers:{"Content-Type":"application/json"}};"credentials"in t&&(g.credentials=t.credentials);let v={mode:e};e==="json"&&(c!=null&&c.refresh_token)&&(v.refresh_token=c.refresh_token),g.body=JSON.stringify(v);let p=D(o.url,"/auth/logout");await F(p.toString(),g,o.globals.fetch),this.stopRefreshing(),await u()},stopRefreshing(){a&&clearTimeout(a)},async getToken(){var c;return await d().catch(()=>{}),((c=await l.get())==null?void 0:c.access_token)??null},async setToken(c){return l.set({access_token:c,refresh_token:null,expires:null,expires_at:null})}}},ht=e=>n=>{let o=e??null;return{async getToken(){return o},async setToken(t){o=t}}},H={fetch:globalThis.fetch,WebSocket:globalThis.WebSocket,URL:globalThis.URL,logger:globalThis.console},Ee=(e,n={})=>{let o=n.globals?{...H,...n.globals}:H;return{globals:o,url:new o.URL(e),with(t){return{...this,...t(this)}}}};function Y(e){return JSON.stringify({...e,type:"auth"})}var $e=()=>JSON.stringify({type:"pong"});function*Q(){let e=1;for(;;)yield String(e),e++}var W=(e,n=1e3)=>new Promise((o,t)=>{let s=f=>{try{let d=JSON.parse(f.data);typeof d=="object"&&!Array.isArray(d)&&d!==null?(l(),o(d)):(l(),a())}catch{l(),o(f)}},a=()=>t(),l=()=>{clearTimeout(u),e.removeEventListener("message",s),e.removeEventListener("error",a),e.removeEventListener("close",a)};e.addEventListener("message",s),e.addEventListener("error",a),e.addEventListener("close",a);let u=setTimeout(()=>{l(),o(void 0)},n)}),je={authMode:"handshake",heartbeat:!0,debug:!1,reconnect:{delay:1e3,retries:10}};function gt(e={}){return n=>{e={...je,...e};let o=Q(),t={code:"closed"},s={attempts:0,active:!1},a=!1,l=new Set,u=r=>"getToken"in r,f=(r,...i)=>e.debug&&n.globals.logger[r]("[Directus SDK]",...i),d=async(r,i)=>{let m=new n.globals.URL(r);if(e.authMode==="strict"&&u(i)){let y=await i.getToken();y&&m.searchParams.set("access_token",y)}return m.toString()},h=async r=>{if("url"in e)return await d(e.url,r);if(["ws:","wss:"].includes(n.url.protocol))return await d(n.url,r);let i=new n.globals.URL(n.url.toString());return i.protocol=n.url.protocol==="https:"?"wss:":"ws:",i.pathname="/websocket",await d(i,r)},w=r=>{let i=new Promise((m,y)=>{if(!e.reconnect||a)return y();if(f("info",`reconnect #${s.attempts} `+(s.attempts>=e.reconnect.retries?"maximum retries reached":`trying again in ${Math.max(100,e.reconnect.delay)}ms`)),s.active)return s.active;if(s.attempts>=e.reconnect.retries)return s.attempts=-1,y();setTimeout(()=>r.connect().then(T=>(l.forEach(b=>{r.sendMessage(b)}),T)).then(m).catch(y),Math.max(100,e.reconnect.delay))});s.attempts+=1,s.active=i.catch(()=>{}).finally(()=>{s.active=!1})},c={open:new Set([]),error:new Set([]),close:new Set([]),message:new Set([])};function g(r){return"type"in r&&"status"in r&&"error"in r&&"code"in r.error&&"message"in r.error&&r.type==="auth"&&r.status==="error"}async function v(r,i){if(t.code==="open"){if(r.error.code==="TOKEN_EXPIRED"&&(f("warn","Authentication token expired!"),u(i))){let m=await i.getToken();if(!m)throw Error("No token for re-authenticating the websocket");t.connection.send(Y({access_token:m}))}if(r.error.code==="AUTH_TIMEOUT")return t.firstMessage&&e.authMode==="public"?(f("warn",'Authentication failed! Currently the "authMode" is "public" try using "handshake" instead'),e.reconnect=!1):f("warn","Authentication timed out!"),t.connection.close();if(r.error.code==="AUTH_FAILED"){if(t.firstMessage&&e.authMode==="public")return f("warn",'Authentication failed! Currently the "authMode" is "public" try using "handshake" instead'),e.reconnect=!1,t.connection.close();f("warn","Authentication failed!")}}}let p=async r=>{for(;t.code==="open";){let i=await W(t.connection).catch(()=>{});if(i){if(g(i)){await v(i,r),t.firstMessage=!1;continue}if(e.heartbeat&&i.type==="ping"){t.connection.send($e()),t.firstMessage=!1;continue}c.message.forEach(m=>{t.code==="open"&&m.call(t.connection,i)}),t.firstMessage=!1}}};return{async connect(){if(a=!1,t.code==="connecting")return await t.connection;if(t.code!=="closed")throw new Error(`Cannot connect when state is "${t.code}"`);let r=this,i=await h(r);f("info",`Connecting to ${i}...`);let m=new Promise((y,T)=>{let b=!1,S=new n.globals.WebSocket(i);S.addEventListener("open",async $=>{if(f("info","Connection open."),t={code:"open",connection:S,firstMessage:!0},s.attempts=0,s.active=!1,p(r),e.authMode==="handshake"&&u(r)){let A=await r.getToken();if(!A)throw Error("No token for authenticating the websocket. Make sure to provide one or call the login() function beforehand.");S.send(Y({access_token:A}));let R=await W(S);if(R&&"type"in R&&"status"in R&&R.type==="auth"&&R.status==="ok")f("info","Authentication successful!");else return T("Authentication failed while opening websocket connection")}c.open.forEach(A=>A.call(S,$)),b=!0,y(S)}),S.addEventListener("error",$=>{f("warn","Connection errored."),c.error.forEach(A=>A.call(S,$)),S.close(),t={code:"error"},b||T($)}),S.addEventListener("close",$=>{f("info","Connection closed."),c.close.forEach(A=>A.call(S,$)),o=Q(),t={code:"closed"},w(this),b||T($)})});return t={code:"connecting",connection:m},m},disconnect(){a=!0,t.code==="open"&&t.connection.close()},onWebSocket(r,i){if(r==="message"){let m=function(y){if(typeof y.data!="string")return i.call(this,y);try{return i.call(this,JSON.parse(y.data))}catch{return i.call(this,y)}};return c[r].add(m),()=>c[r].delete(m)}return c[r].add(i),()=>c[r].delete(i)},sendMessage(r){if(t.code!=="open")throw new Error('Cannot send messages without an open connection. Make sure you are calling "await client.connect()".');if(typeof r=="string")return t.connection.send(r);"uid"in r||(r.uid=o.next().value),t.connection.send(JSON.stringify(r))},async subscribe(r,i={}){"uid"in i||(i.uid=o.next().value),l.add({...i,collection:r,type:"subscribe"}),t.code!=="open"&&(f("info","No connection available for subscribing!"),await this.connect()),this.sendMessage({...i,collection:r,type:"subscribe"});let m=!0;async function*y(){for(;m&&t.code==="open";){let b=await W(t.connection).catch(()=>{});if(b){if("type"in b&&"status"in b&&b.type==="subscribe"&&b.status==="error")throw b;"type"in b&&"uid"in b&&b.type==="subscription"&&b.uid===i.uid&&(yield b)}}e.reconnect&&s.active&&(await s.active,t.code==="open"&&(t.connection.send(JSON.stringify({...i,collection:r,type:"subscribe"})),yield*y()))}let T=()=>{l.delete({...i,collection:r,type:"subscribe"}),this.sendMessage({uid:i.uid,type:"unsubscribe"}),m=!1};return{subscription:y(),unsubscribe:T}}}}}function oe(e){return["directus_access","directus_activity","directus_collections","directus_comments","directus_fields","directus_files","directus_folders","directus_migrations","directus_permissions","directus_policies","directus_presets","directus_relations","directus_revisions","directus_roles","directus_sessions","directus_settings","directus_users","directus_webhooks","directus_dashboards","directus_panels","directus_notifications","directus_shares","directus_flows","directus_operations","directus_translations","directus_versions","directus_extensions"].includes(e)}var mt=(e,n,o)=>()=>{let t=String(e);if(oe(t))throw new Error("Cannot use createItem for core collections");return{path:`/items/${t}`,params:o??{},body:JSON.stringify(n),method:"POST"}},Me=e=>{let n=(o,t=[])=>{if(typeof o=="object"){let s=[];for(let a in o){let l=o[a]??[];if(Array.isArray(l))for(let u of l)s.push(n(u,[...t,a]));else if(typeof l=="object")for(let u of Object.keys(l)){let f=l[u];for(let d of f)s.push(n(d,[...t,`${a}:${u}`]))}}return s.flatMap(a=>a)}return[...t,String(o)].join(".")};return e.flatMap(o=>n(o))},Ce=e=>{let n={};Array.isArray(e.fields)&&e.fields.length>0&&(n.fields=Me(e.fields).join(",")),e.filter&&Object.keys(e.filter).length>0&&(n.filter=JSON.stringify(e.filter)),e.search&&(n.search=e.search),"sort"in e&&e.sort&&(n.sort=typeof e.sort=="string"?e.sort:e.sort.join(",")),typeof e.limit=="number"&&e.limit>=-1&&(n.limit=String(e.limit)),typeof e.offset=="number"&&e.offset>=0&&(n.offset=String(e.offset)),typeof e.page=="number"&&e.page>=1&&(n.page=String(e.page)),e.deep&&Object.keys(e.deep).length>0&&(n.deep=JSON.stringify(e.deep)),e.alias&&Object.keys(e.alias).length>0&&(n.alias=JSON.stringify(e.alias)),e.aggregate&&Object.keys(e.aggregate).length>0&&(n.aggregate=JSON.stringify(e.aggregate)),e.groupBy&&e.groupBy.length>0&&(n.groupBy=e.groupBy.join(","));for(let[o,t]of Object.entries(e))o in n||(typeof t=="string"||typeof t=="number"||typeof t=="boolean"?n[o]=String(t):n[o]=JSON.stringify(t));return n},P=(e,n)=>{if(e.length===0)throw new Error(n)},se=(e,n)=>{if(oe(String(e)))throw new Error(n)},yt=(e,n)=>()=>(P(String(e),"Collection cannot be empty"),se(e,"Cannot use readItems for core collections"),{path:`/items/${e}`,params:n??{},method:"GET"}),wt=(e,n,o)=>()=>(P(String(e),"Collection cannot be empty"),se(e,"Cannot use readItem for core collections"),P(String(n),"Key cannot be empty"),{path:`/items/${e}/${n}`,params:o??{},method:"GET"}),Oe=e=>()=>({path:"/users/me",params:e??{},method:"GET"}),vt=(e,n,o)=>()=>(P(e,"Key cannot be empty"),{path:`/users/${e}`,params:o??{},body:JSON.stringify(n),method:"PATCH"}),Re=(e,n,o={})=>()=>({path:"/users/register",method:"POST",body:JSON.stringify({email:e,password:n,...o})}),Le={},Ne=(e={})=>n=>{let o={...Le,...e};return{async request(t){let s=t();if(s.headers||(s.headers={}),"Content-Type"in s.headers?s.headers["Content-Type"]==="multipart/form-data"&&delete s.headers["Content-Type"]:s.headers["Content-Type"]="application/json","getToken"in this&&!("Authorization"in s.headers)){let f=await this.getToken();f&&(s.headers.Authorization=`Bearer ${f}`)}let a=D(n.url,s.path,s.params),l={method:s.method??"GET",headers:s.headers??{}};"credentials"in o&&(l.credentials=o.credentials),s.body&&(l.body=s.body),s.onRequest&&(l=await s.onRequest(l)),o.onRequest&&(l=await o.onRequest(l));let u=await F(a.toString(),l,n.globals.fetch);return"onResponse"in s&&(u=await s.onResponse(u,l)),"onResponse"in e&&(u=await e.onResponse(u,l)),u}}};const q=x(null),Ie=x(!1),j=Ee("https://schooldb.chromatone.center/").with(Ae("cookie",{credentials:"include",autoRefresh:!0})).with(Ne({credentials:"include"}));function re(){ae(async()=>{j.refresh(),await j.getToken()&&n()});async function e(t,s,a){t?(await j.login(s,a),n()):(await j.request(Re(s,a)),Ie.value=!0)}async function n(){q.value=await j.request(Oe())}async function o(){await j.logout(),q.value=null}return{user:q,userDB:j,auth:e,logout:o}}const De={key:0,class:"p-4 flex flex-col gap-2"},Fe={class:"flex gap-2 items-center p-2"},Pe=["src"],Ue={class:"flex flex-col"},Je={class:"text-2xl"},Be={class:"text-xs op-50"},We={class:"flex flex-wrap gap-2"},qe={class:"text-2xl"},Ge={class:"p-2 border-2",type:"submit"},Ve={class:"flex gap-1"},Ke={__name:"AuthForm",setup(e){const n=x(""),o=x(""),t=x(!0),{user:s,userDB:a,auth:l,logout:u}=re();return(f,d)=>k(s)?(C(),O("div",De,[_("div",Fe,[k(s).avatar?(C(),O("img",{key:0,class:"rounded-full",src:`https://schooldb.chromatone.center/assets/${k(s).avatar}?width=50&height=50`},null,8,Pe)):Z("",!0),_("div",Ue,[_("div",Je,M(k(s).first_name)+" "+M(k(s).last_name),1),_("div",Be,M(k(s).location),1)])]),_("div",We,[d[5]||(d[5]=_("a",{class:"no-underline p-2 bg-light-500 rounded-lg hover-bg-light-100",href:"/student"},"My page",-1)),_("button",{class:"p-2 bg-light-500 rounded-lg hover-bg-light-100",onClick:d[0]||(d[0]=h=>k(u)())},"Logout")])])):(C(),O("form",{key:1,class:"flex flex-col gap-4",onSubmit:d[4]||(d[4]=le(h=>k(l)(t.value,n.value,o.value),["prevent","stop"]))},[_("h2",qe,M(t.value?"Sign In":"Sign Up"),1),V(_("input",{type:"email","onUpdate:modelValue":d[1]||(d[1]=h=>n.value=h),placeholder:"Your email"},null,512),[[z,n.value]]),V(_("input",{type:"password","onUpdate:modelValue":d[2]||(d[2]=h=>o.value=h),placeholder:"Your password"},null,512),[[z,o.value]]),_("button",Ge,M(t.value?"LOGIN":"REGISTER"),1),_("div",Ve,[d[6]||(d[6]=_("div",{class:"op-30"},"Don't have an account?",-1)),_("a",{class:"cursor-pointer underline",onClick:d[3]||(d[3]=h=>t.value=!t.value)},M(t.value?"Register":"Login"),1)])],32))}},ze=ie(Ke,[["__scopeId","data-v-cf69f8e7"]]);function U(e){return ce()?(ue(e),!0):!1}function E(e){return typeof e=="function"?e():k(e)}const J=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const He=Object.prototype.toString,Ye=e=>He.call(e)==="[object Object]",N=()=>{},Qe=Xe();function Xe(){var e,n;return J&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Ze(e,n=1e3,o={}){const{immediate:t=!0,immediateCallback:s=!1}=o;let a=null;const l=x(!1);function u(){a&&(clearInterval(a),a=null)}function f(){l.value=!1,u()}function d(){const h=E(n);h<=0||(l.value=!0,s&&e(),u(),l.value&&(a=setInterval(e,h)))}if(t&&J&&d(),ee(n)||typeof n=="function"){const h=te(n,()=>{l.value&&J&&d()});U(h)}return U(f),{isActive:l,pause:f,resume:d}}function bt(e,n,o){let t;ee(o)?t={evaluating:o}:t={};const{lazy:s=!1,evaluating:a=void 0,shallow:l=!0,onError:u=N}=t,f=x(!s),d=l?de(n):x(n);let h=0;return fe(async w=>{if(!f.value)return;h++;const c=h;let g=!1;a&&Promise.resolve().then(()=>{a.value=!0});try{const v=await e(p=>{w(()=>{a&&(a.value=!1),g||p()})});c===h&&(d.value=v)}catch(v){u(v)}finally{a&&c===h&&(a.value=!1),g=!0}}),s?ne(()=>(f.value=!0,d.value)):d}const K=J?window:void 0;function L(e){var n;const o=E(e);return(n=o==null?void 0:o.$el)!=null?n:o}function G(...e){let n,o,t,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,t,s]=e,n=K):[n,o,t,s]=e,!n)return N;Array.isArray(o)||(o=[o]),Array.isArray(t)||(t=[t]);const a=[],l=()=>{a.forEach(h=>h()),a.length=0},u=(h,w,c,g)=>(h.addEventListener(w,c,g),()=>h.removeEventListener(w,c,g)),f=te(()=>[L(n),E(s)],([h,w])=>{if(l(),!h)return;const c=Ye(w)?{...w}:w;a.push(...o.flatMap(g=>t.map(v=>u(h,g,v,c))))},{immediate:!0,flush:"post"}),d=()=>{f(),l()};return U(d),d}let X=!1;function et(e,n,o={}){const{window:t=K,ignore:s=[],capture:a=!0,detectIframe:l=!1}=o;if(!t)return N;Qe&&!X&&(X=!0,Array.from(t.document.body.children).forEach(p=>p.addEventListener("click",N)),t.document.documentElement.addEventListener("click",N));let u=!0;const f=p=>E(s).some(r=>{if(typeof r=="string")return Array.from(t.document.querySelectorAll(r)).some(i=>i===p.target||p.composedPath().includes(i));{const i=L(r);return i&&(p.target===i||p.composedPath().includes(i))}});function d(p){const r=E(p);return r&&r.$.subTree.shapeFlag===16}function h(p,r){const i=E(p),m=i.$.subTree&&i.$.subTree.children;return m==null||!Array.isArray(m)?!1:m.some(y=>y.el===r.target||r.composedPath().includes(y.el))}const w=p=>{const r=L(e);if(p.target!=null&&!(!(r instanceof Element)&&d(e)&&h(e,p))&&!(!r||r===p.target||p.composedPath().includes(r))){if(p.detail===0&&(u=!f(p)),!u){u=!0;return}n(p)}};let c=!1;const g=[G(t,"click",p=>{c||(c=!0,setTimeout(()=>{c=!1},0),w(p))},{passive:!0,capture:a}),G(t,"pointerdown",p=>{const r=L(e);u=!f(p)&&!!(r&&!p.composedPath().includes(r))},{passive:!0}),l&&G(t,"blur",p=>{setTimeout(()=>{var r;const i=L(e);((r=t.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(i!=null&&i.contains(t.document.activeElement))&&n(p)},0)})].filter(Boolean);return()=>g.forEach(p=>p())}function tt(e,n={}){const{immediate:o=!0,fpsLimit:t=void 0,window:s=K}=n,a=x(!1),l=t?1e3/t:null;let u=0,f=null;function d(c){if(!a.value||!s)return;u||(u=c);const g=c-u;if(l&&g<l){f=s.requestAnimationFrame(d);return}u=c,e({delta:g,timestamp:c}),f=s.requestAnimationFrame(d)}function h(){!a.value&&s&&(a.value=!0,u=0,f=s.requestAnimationFrame(d))}function w(){a.value=!1,f!=null&&s&&(s.cancelAnimationFrame(f),f=null)}return o&&h(),U(w),{isActive:pe(a),pause:w,resume:h}}function nt(e={}){const{controls:n=!1,interval:o="requestAnimationFrame"}=e,t=x(new Date),s=()=>t.value=new Date,a=o==="requestAnimationFrame"?tt(s,{immediate:!0}):Ze(s,o,{immediate:!0});return n?{now:t,...a}:t}const ot=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],st={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,n)=>e===1?n?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,n)=>e===1?n?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,n)=>e===1?n?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,n)=>e===1?n?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function rt(e){return e.toISOString().slice(0,10)}function _t(e,n={}){const{controls:o=!1,updateInterval:t=3e4}=n,{now:s,...a}=nt({interval:t,controls:!0}),l=ne(()=>at(new Date(E(e)),n,E(s)));return o?{timeAgo:l,...a}:l}function at(e,n={},o=Date.now()){var t;const{max:s,messages:a=st,fullDateFormatter:l=rt,units:u=ot,showSecond:f=!1,rounding:d="round"}=n,h=typeof d=="number"?r=>+r.toFixed(d):Math[d],w=+o-+e,c=Math.abs(w);function g(r,i){return h(Math.abs(r)/i.value)}function v(r,i){const m=g(r,i),y=r>0,T=p(i.name,m,y);return p(y?"past":"future",T,y)}function p(r,i,m){const y=a[r];return typeof y=="function"?y(i,m):y.replace("{0}",i.toString())}if(c<6e4&&!f)return a.justNow;if(typeof s=="number"&&c>s)return l(new Date(e));if(typeof s=="string"){const r=(t=u.find(i=>i.name===s))==null?void 0:t.max;if(r&&c>r)return l(new Date(e))}for(const[r,i]of u.entries()){if(g(w,i)<=0&&u[r-1])return v(w,u[r-1]);if(c<i.max)return v(w,i)}return a.invalid}const it={class:"flex flex-col items-start w-full h-full justify-stretch relative"},lt=["src"],ct={key:1,class:"i-la-user"},ut={key:0,class:"p-2 op-50",href:"/"},dt={class:"p-2 text-2xl"},ft={__name:"Layout",setup(e){const{frontmatter:n}=he(),o=x(!1),{user:t}=re(),s=x();return et(s,()=>{o.value=!1}),(a,l)=>{var f;const u=ge("content");return C(),O("div",it,[_("button",{class:"op-50 fixed top-4 right-4 z-100 text-2xl p-2 rounded-full bg-light-400",onClick:l[0]||(l[0]=d=>o.value=!o.value)},[(f=k(t))!=null&&f.avatar?(C(),O("img",{key:0,class:"rounded-full",src:`https://schooldb.chromatone.center/assets/${k(t).avatar}?width=40&height=40`},null,8,lt)):(C(),O("div",ct))]),B(we,{name:"fade"},{default:me(()=>[V(B(ze,{class:"bg-light-300 p-4 pt-8 pr-8 rounded-2xl shadow-xl fixed top-4 right-4 z-90",ref_key:"authModal",ref:s},null,512),[[ye,o.value]])]),_:1}),k(n).home?Z("",!0):(C(),O("a",ut,"Creative Multimedia School")),_("h1",dt,M(k(n).title),1),B(u,{class:"prose max-w-unset flex-1"})])}}},kt={Layout:ft,enhanceApp({app:e,router:n,siteData:o}){}};export{ze as A,Ne as F,yt as G,wt as K,kt as R,mt as U,vt as _,_t as a,bt as c,Ee as l,ht as p,re as u,gt as v};
