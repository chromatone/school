import{$ as h,o as f,f as e,h as a,p as _,q as x,k as n,H as g,I as b,a0 as y,u as c,j as t,t as r,C as w,a1 as k}from"./framework.DW4X5dct.js";import{u as E}from"./useWS.C-wv3s4N.js";import{u as C}from"./useHash.Af5Qi_to.js";import{f as d}from"./format.BLmWzEp7.js";import"./theme.CpoVLELW.js";const H={class:"flex gap-4 py-8 overflow-x-scroll max-w-100vw min-h-40"},M={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},N=["href"],$=["src"],j={class:"flex w-full font-mono p-2"},B={class:"text-sm"},S={class:"text-sm"},V=["src"],q={class:"flex items-start gap-2"},z={class:"op-60"},L={class:"p-0"},O={class:"px-2 py-1 bg-light-800 rounded-lg text-xs uppercase"},A={__name:"EventsList",setup(D){const{ws:u}=E(),i=h([]),m=C();return f(async()=>{const{subscription:l}=await u.subscribe("events",{uid:"events-list-sub",query:{sort:["date"],fields:["*","module.title","course.level","course.teacher.*","course.program.title","course.program.color"]}});for await(const o of l)switch(o.event){case"init":Object.assign(i,o.data);break;case"update":o.data.forEach(s=>Object.assign(i.find(p=>p.id==s.id),s));break}}),(l,o)=>(e(),a("div",H,[_(k,{name:"fade"},{default:x(()=>[i.length==0?(e(),a("div",M)):n("",!0),(e(!0),a(g,null,b(i,s=>(e(),a("a",{class:y(["no-underline shadow-lg flex flex-col rounded-xl transition",{[c(m)==s.id?"bg-orange-200":"bg-light-200"]:!0}]),key:s.id,href:`#${s.id}`,style:{flex:"1 0 220px"}},[s!=null&&s.poster?(e(),a("img",{key:0,src:`https://schooldb.chromatone.center/assets/${s.poster}?width=400`},null,8,$)):n("",!0),t("div",j,[t("div",B,r(c(d)(s.date," HH:mm EEE")),1),o[0]||(o[0]=t("div",{class:"flex-1"},null,-1)),t("div",S,r(c(d)(s.date,"dd MMM yy")),1)]),s!=null&&s.cover?(e(),a("img",{key:1,src:`https://schooldb.chromatone.center/assets/${s.cover}?width=400`},null,8,V)):n("",!0),t("div",{class:"flex flex-col p-2 bg-cover bg-center",style:w({backgroundColor:s==null?void 0:s.color})},[t("div",q,[t("div",z,r(s==null?void 0:s.title),1),t("div",L,r(Number(s==null?void 0:s.duration))+"Â hr",1),t("div",O,r(s==null?void 0:s.type),1)])],4)],10,N))),128))]),_:1})]))}};export{A as default};
