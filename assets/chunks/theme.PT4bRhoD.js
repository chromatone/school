import{o as de,n as fe,r as A,i as pe,w as z,a as he,t as N,g as xe,b as Se,c as ke,d as X,s as me,e as Te,_ as Ae,f as E,h as C,u as S,j as _,k as D,l as R,m as Ee,p as te,v as re,q,x as ge,y as se,T as ye,z as Ce,A as Oe,B as $e,C as je,D as Ne}from"./framework.COiIuXUL.js";function Y(e){return xe()?(Se(e),!0):!1}const Q=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Me=Object.prototype.toString,Re=e=>Me.call(e)==="[object Object]",J=()=>{},Fe=Le();function Le(){var e,t;return Q&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function De(e,t){function r(...n){return new Promise((s,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(s).catch(a)})}return r}const we=e=>e();function Ie(e=we){const t=A(!0);function r(){t.value=!1}function n(){t.value=!0}const s=(...a)=>{t.value&&e(...a)};return{isActive:he(t),pause:r,resume:n,eventFilter:s}}function Pe(e){return ke()}function oe(e){return Array.isArray(e)?e:[e]}function Je(e,t,r={}){const{eventFilter:n=we,...s}=r;return z(e,De(n,t),s)}function We(e,t,r={}){const{eventFilter:n,...s}=r,{eventFilter:a,pause:i,resume:p,isActive:f}=Ie(n);return{stop:Je(e,t,{...s,eventFilter:a}),pause:i,resume:p,isActive:f}}function Ue(e,t=!0,r){Pe()?de(e,r):t?e():fe(e)}function ze(e,t=1e3,r={}){const{immediate:n=!0,immediateCallback:s=!1}=r;let a=null;const i=A(!1);function p(){a&&(clearInterval(a),a=null)}function f(){i.value=!1,p()}function h(){const d=N(t);d<=0||(i.value=!0,s&&e(),p(),i.value&&(a=setInterval(e,d)))}if(n&&Q&&h(),pe(t)||typeof t=="function"){const d=z(t,()=>{i.value&&Q&&h()});Y(d)}return Y(f),{isActive:i,pause:f,resume:h}}function qt(e,t,r){let n;pe(r)?n={evaluating:r}:n={};const{lazy:s=!1,evaluating:a=void 0,shallow:i=!0,onError:p=J}=n,f=A(!s),h=i?me(t):A(t);let d=0;return Te(async g=>{if(!f.value)return;d++;const c=d;let m=!1;a&&Promise.resolve().then(()=>{a.value=!0});try{const v=await e(u=>{g(()=>{a&&(a.value=!1),m||u()})});c===d&&(h.value=v)}catch(v){p(v)}finally{a&&c===d&&(a.value=!1),m=!0}}),s?X(()=>(f.value=!0,h.value)):h}const U=Q?window:void 0;function P(e){var t;const r=N(e);return(t=r==null?void 0:r.$el)!=null?t:r}function W(...e){let t,r,n,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,n,s]=e,t=U):[t,r,n,s]=e,!t)return J;r=oe(r),n=oe(n);const a=[],i=()=>{a.forEach(d=>d()),a.length=0},p=(d,g,c,m)=>(d.addEventListener(g,c,m),()=>d.removeEventListener(g,c,m)),f=z(()=>[P(t),N(s)],([d,g])=>{if(i(),!d)return;const c=Re(g)?{...g}:g;a.push(...r.flatMap(m=>n.map(v=>p(d,m,v,c))))},{immediate:!0,flush:"post"}),h=()=>{f(),i()};return Y(h),h}let ae=!1;function Be(e,t,r={}){const{window:n=U,ignore:s=[],capture:a=!0,detectIframe:i=!1}=r;if(!n)return J;Fe&&!ae&&(ae=!0,Array.from(n.document.body.children).forEach(u=>u.addEventListener("click",J)),n.document.documentElement.addEventListener("click",J));let p=!0;const f=u=>N(s).some(o=>{if(typeof o=="string")return Array.from(n.document.querySelectorAll(o)).some(l=>l===u.target||u.composedPath().includes(l));{const l=P(o);return l&&(u.target===l||u.composedPath().includes(l))}});function h(u){const o=N(u);return o&&o.$.subTree.shapeFlag===16}function d(u,o){const l=N(u),w=l.$.subTree&&l.$.subTree.children;return w==null||!Array.isArray(w)?!1:w.some(y=>y.el===o.target||o.composedPath().includes(y.el))}const g=u=>{const o=P(e);if(u.target!=null&&!(!(o instanceof Element)&&h(e)&&d(e,u))&&!(!o||o===u.target||u.composedPath().includes(o))){if(u.detail===0&&(p=!f(u)),!p){p=!0;return}t(u)}};let c=!1;const m=[W(n,"click",u=>{c||(c=!0,setTimeout(()=>{c=!1},0),g(u))},{passive:!0,capture:a}),W(n,"pointerdown",u=>{const o=P(e);p=!f(u)&&!!(o&&!u.composedPath().includes(o))},{passive:!0}),i&&W(n,"blur",u=>{setTimeout(()=>{var o;const l=P(e);((o=n.document.activeElement)==null?void 0:o.tagName)==="IFRAME"&&!(l!=null&&l.contains(n.document.activeElement))&&t(u)},0)},{passive:!0})].filter(Boolean);return()=>m.forEach(u=>u())}function Ve(e,t={}){const{immediate:r=!0,fpsLimit:n=void 0,window:s=U}=t,a=A(!1),i=X(()=>n?1e3/N(n):null);let p=0,f=null;function h(c){if(!a.value||!s)return;p||(p=c);const m=c-p;if(i.value&&m<i.value){f=s.requestAnimationFrame(h);return}p=c,e({delta:m,timestamp:c}),f=s.requestAnimationFrame(h)}function d(){!a.value&&s&&(a.value=!0,p=0,f=s.requestAnimationFrame(h))}function g(){a.value=!1,f!=null&&s&&(s.cancelAnimationFrame(f),f=null)}return r&&d(),Y(g),{isActive:he(a),pause:g,resume:d}}const B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V="__vueuse_ssr_handlers__",qe=Ge();function Ge(){return V in B||(B[V]=B[V]||{}),B[V]}function Ke(e,t){return qe[e]||t}function He(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Ye={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},ie="vueuse-storage";function Gt(e,t,r,n={}){var s;const{flush:a="pre",deep:i=!0,listenToStorageChanges:p=!0,writeDefaults:f=!0,mergeDefaults:h=!1,shallow:d,window:g=U,eventFilter:c,onError:m=b=>{console.error(b)},initOnMounted:v}=n,u=(d?me:A)(typeof t=="function"?t():t),o=X(()=>N(e));if(!r)try{r=Ke("getDefaultStorage",()=>{var b;return(b=U)==null?void 0:b.localStorage})()}catch(b){m(b)}if(!r)return u;const l=N(t),w=He(l),y=(s=n.serializer)!=null?s:Ye[w],{pause:O,resume:x}=We(u,()=>F(u.value),{flush:a,deep:i,eventFilter:c});z(o,()=>$(),{flush:a}),g&&p&&Ue(()=>{r instanceof Storage?W(g,"storage",$,{passive:!0}):W(g,ie,_e),v&&$()}),v||$();function T(b,k){if(g){const j={key:o.value,oldValue:b,newValue:k,storageArea:r};g.dispatchEvent(r instanceof Storage?new StorageEvent("storage",j):new CustomEvent(ie,{detail:j}))}}function F(b){try{const k=r.getItem(o.value);if(b==null)T(k,null),r.removeItem(o.value);else{const j=y.write(b);k!==j&&(r.setItem(o.value,j),T(k,j))}}catch(k){m(k)}}function M(b){const k=b?b.newValue:r.getItem(o.value);if(k==null)return f&&l!=null&&r.setItem(o.value,y.write(l)),l;if(!b&&h){const j=y.read(k);return typeof h=="function"?h(j,l):w==="object"&&!Array.isArray(j)?{...l,...j}:j}else return typeof k!="string"?k:y.read(k)}function $(b){if(!(b&&b.storageArea!==r)){if(b&&b.key==null){u.value=l;return}if(!(b&&b.key!==o.value)){O();try{(b==null?void 0:b.newValue)!==y.write(u.value)&&(u.value=M(b))}catch(k){m(k)}finally{b?fe(x):x()}}}}function _e(b){$(b.detail)}return u}function Qe(e={}){const{controls:t=!1,interval:r="requestAnimationFrame"}=e,n=A(new Date),s=()=>n.value=new Date,a=r==="requestAnimationFrame"?Ve(s,{immediate:!0}):ze(s,r,{immediate:!0});return t?{now:n,...a}:n}const Xe=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],Ze={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,t)=>e===1?t?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,t)=>e===1?t?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,t)=>e===1?t?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,t)=>e===1?t?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function et(e){return e.toISOString().slice(0,10)}function Kt(e,t={}){const{controls:r=!1,updateInterval:n=3e4}=t,{now:s,...a}=Qe({interval:n,controls:!0}),i=X(()=>tt(new Date(N(e)),t,N(s)));return r?{timeAgo:i,...a}:i}function tt(e,t={},r=Date.now()){var n;const{max:s,messages:a=Ze,fullDateFormatter:i=et,units:p=Xe,showSecond:f=!1,rounding:h="round"}=t,d=typeof h=="number"?o=>+o.toFixed(h):Math[h],g=+r-+e,c=Math.abs(g);function m(o,l){return d(Math.abs(o)/l.value)}function v(o,l){const w=m(o,l),y=o>0,O=u(l.name,w,y);return u(y?"past":"future",O,y)}function u(o,l,w){const y=a[o];return typeof y=="function"?y(l,w):y.replace("{0}",l.toString())}if(c<6e4&&!f)return a.justNow;if(typeof s=="number"&&c>s)return i(new Date(e));if(typeof s=="string"){const o=(n=p.find(l=>l.name===s))==null?void 0:n.max;if(o&&c>o)return i(new Date(e))}for(const[o,l]of p.entries()){if(m(g,l)<=0&&p[o-1])return v(g,p[o-1]);if(c<l.max)return v(g,l)}return a.invalid}function nt(e){return e?`/auth/login/${e}`:"/auth/login"}var G="/",rt=(e,t)=>(e.endsWith(G)&&(e=e.slice(0,-1)),t.startsWith(G)||(t=G+t),e+t),K=(e,t,r)=>{let n=e.pathname===G?t:rt(e.pathname,t),s=new globalThis.URL(n,e);if(r)for(let[a,i]of Object.entries(ht(r)))if(i&&typeof i=="object"&&!Array.isArray(i))for(let[p,f]of Object.entries(i))s.searchParams.set(`${a}[${p}]`,String(f));else s.searchParams.set(a,i);return s};function st(e){return typeof e!="object"||!e?!1:"headers"in e&&"ok"in e&&"json"in e&&typeof e.json=="function"&&"text"in e&&typeof e.json=="function"}async function ot(e){var t;if(!(typeof e!="object"||!e)){if(st(e)){let r=(t=e.headers.get("Content-Type"))==null?void 0:t.toLowerCase();if(r!=null&&r.startsWith("application/json")||r!=null&&r.startsWith("application/health+json")){let n=await e.json();if(!e.ok||"errors"in n)throw n;return"data"in n?n.data:n}if(r!=null&&r.startsWith("text/html")||r!=null&&r.startsWith("text/plain")){let n=await e.text();if(!e.ok)throw n;return n}return e.status===204?null:e}if("errors"in e)throw e;return"data"in e?e.data:e}}var H=async(e,t,r=globalThis.fetch)=>(t.headers=typeof t.headers=="object"&&!Array.isArray(t.headers)?t.headers:{},r(e,t).then(n=>ot(n).catch(s=>{let a={errors:s&&typeof s=="object"&&"errors"in s?s.errors:s,response:n};return s&&typeof s=="object"&&"data"in s&&(a.data=s.data),Promise.reject(a)}))),at=()=>{let e=null;return{get:async()=>e,set:async t=>{e=t}}},it={msRefreshBeforeExpires:3e4,autoRefresh:!0},lt=2**31-1,ct=(e="cookie",t={})=>r=>{let n={...it,...t},s=null,a=null,i=n.storage??at(),p=async()=>i.set({access_token:null,refresh_token:null,expires:null,expires_at:null}),f=async()=>{try{await s}finally{s=null}},h=async()=>{let c=await i.get();return s||!(c!=null&&c.expires_at)||c.expires_at<new Date().getTime()+n.msRefreshBeforeExpires&&g().catch(m=>{}),f()},d=async c=>{let m=c.expires??0;c.expires_at=new Date().getTime()+m,await i.set(c),n.autoRefresh&&m>n.msRefreshBeforeExpires&&m<lt&&(a&&clearTimeout(a),a=setTimeout(()=>{a=null,g().catch(v=>{})},m-n.msRefreshBeforeExpires))},g=async()=>(s=(async()=>{let c=await i.get();await p();let m={method:"POST",headers:{"Content-Type":"application/json"}};"credentials"in n&&(m.credentials=n.credentials);let v={mode:e};e==="json"&&(c!=null&&c.refresh_token)&&(v.refresh_token=c.refresh_token),m.body=JSON.stringify(v);let u=K(r.url,"/auth/refresh");return H(u.toString(),m,r.globals.fetch).then(o=>d(o).then(()=>o))})(),s);return{refresh:g,async login(c,m,v={}){await p();let u={email:c,password:m};"otp"in v&&(u.otp=v.otp),u.mode=v.mode??e;let o=nt(v.provider),l=K(r.url,o),w={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)};"credentials"in n&&(w.credentials=n.credentials);let y=await H(l.toString(),w,r.globals.fetch);return await d(y),y},async logout(){let c=await i.get(),m={method:"POST",headers:{"Content-Type":"application/json"}};"credentials"in n&&(m.credentials=n.credentials);let v={mode:e};e==="json"&&(c!=null&&c.refresh_token)&&(v.refresh_token=c.refresh_token),m.body=JSON.stringify(v);let u=K(r.url,"/auth/logout");await H(u.toString(),m,r.globals.fetch),this.stopRefreshing(),await p()},stopRefreshing(){a&&clearTimeout(a)},async getToken(){var c;return await h().catch(()=>{}),((c=await i.get())==null?void 0:c.access_token)??null},async setToken(c){return i.set({access_token:c,refresh_token:null,expires:null,expires_at:null})}}},Ht=e=>t=>{let r=e??null;return{async getToken(){return r},async setToken(n){r=n}}},le={fetch:globalThis.fetch,WebSocket:globalThis.WebSocket,URL:globalThis.URL,logger:globalThis.console},ut=(e,t={})=>{let r=t.globals?{...le,...t.globals}:le;return{globals:r,url:new r.URL(e),with(n){return{...this,...n(this)}}}};function ce(e){return JSON.stringify({...e,type:"auth"})}var dt=()=>JSON.stringify({type:"pong"});function*ue(){let e=1;for(;;)yield String(e),e++}var Z=(e,t=1e3)=>new Promise((r,n)=>{let s=f=>{try{let h=JSON.parse(f.data);typeof h=="object"&&!Array.isArray(h)&&h!==null?(i(),r(h)):(i(),a())}catch{i(),r(f)}},a=()=>n(),i=()=>{clearTimeout(p),e.removeEventListener("message",s),e.removeEventListener("error",a),e.removeEventListener("close",a)};e.addEventListener("message",s),e.addEventListener("error",a),e.addEventListener("close",a);let p=setTimeout(()=>{i(),r(void 0)},t)}),ft={authMode:"handshake",heartbeat:!0,debug:!1,reconnect:{delay:1e3,retries:10}};function Yt(e={}){return t=>{e={...ft,...e};let r=ue(),n={code:"closed"},s={attempts:0,active:!1},a=!1,i=new Set,p=o=>"getToken"in o,f=(o,...l)=>e.debug&&t.globals.logger[o]("[Directus SDK]",...l),h=async(o,l)=>{let w=new t.globals.URL(o);if(e.authMode==="strict"&&p(l)){let y=await l.getToken();y&&w.searchParams.set("access_token",y)}return w.toString()},d=async o=>{if("url"in e)return await h(e.url,o);if(["ws:","wss:"].includes(t.url.protocol))return await h(t.url,o);let l=new t.globals.URL(t.url.toString());return l.protocol=t.url.protocol==="https:"?"wss:":"ws:",l.pathname="/websocket",await h(l,o)},g=o=>{let l=new Promise((w,y)=>{if(!e.reconnect||a)return y();if(f("info",`reconnect #${s.attempts} `+(s.attempts>=e.reconnect.retries?"maximum retries reached":`trying again in ${Math.max(100,e.reconnect.delay)}ms`)),s.active)return s.active;if(s.attempts>=e.reconnect.retries)return s.attempts=-1,y();setTimeout(()=>o.connect().then(O=>(i.forEach(x=>{o.sendMessage(x)}),O)).then(w).catch(y),Math.max(100,e.reconnect.delay))});s.attempts+=1,s.active=l.catch(()=>{}).finally(()=>{s.active=!1})},c={open:new Set([]),error:new Set([]),close:new Set([]),message:new Set([])};function m(o){return"type"in o&&"status"in o&&"error"in o&&"code"in o.error&&"message"in o.error&&o.type==="auth"&&o.status==="error"}async function v(o,l){if(n.code==="open"){if(o.error.code==="TOKEN_EXPIRED"&&(f("warn","Authentication token expired!"),p(l))){let w=await l.getToken();if(!w)throw Error("No token for re-authenticating the websocket");n.connection.send(ce({access_token:w}))}if(o.error.code==="AUTH_TIMEOUT")return n.firstMessage&&e.authMode==="public"?(f("warn",'Authentication failed! Currently the "authMode" is "public" try using "handshake" instead'),e.reconnect=!1):f("warn","Authentication timed out!"),n.connection.close();if(o.error.code==="AUTH_FAILED"){if(n.firstMessage&&e.authMode==="public")return f("warn",'Authentication failed! Currently the "authMode" is "public" try using "handshake" instead'),e.reconnect=!1,n.connection.close();f("warn","Authentication failed!")}}}let u=async o=>{for(;n.code==="open";){let l=await Z(n.connection).catch(()=>{});if(l){if(m(l)){await v(l,o),n.firstMessage=!1;continue}if(e.heartbeat&&l.type==="ping"){n.connection.send(dt()),n.firstMessage=!1;continue}c.message.forEach(w=>{n.code==="open"&&w.call(n.connection,l)}),n.firstMessage=!1}}};return{async connect(){if(a=!1,n.code==="connecting")return await n.connection;if(n.code!=="closed")throw new Error(`Cannot connect when state is "${n.code}"`);let o=this,l=await d(o);f("info",`Connecting to ${l}...`);let w=new Promise((y,O)=>{let x=!1,T=new t.globals.WebSocket(l);T.addEventListener("open",async F=>{if(f("info","Connection open."),n={code:"open",connection:T,firstMessage:!0},s.attempts=0,s.active=!1,u(o),e.authMode==="handshake"&&p(o)){let M=await o.getToken();if(!M)throw Error("No token for authenticating the websocket. Make sure to provide one or call the login() function beforehand.");T.send(ce({access_token:M}));let $=await Z(T);if($&&"type"in $&&"status"in $&&$.type==="auth"&&$.status==="ok")f("info","Authentication successful!");else return O("Authentication failed while opening websocket connection")}c.open.forEach(M=>M.call(T,F)),x=!0,y(T)}),T.addEventListener("error",F=>{f("warn","Connection errored."),c.error.forEach(M=>M.call(T,F)),T.close(),n={code:"error"},x||O(F)}),T.addEventListener("close",F=>{f("info","Connection closed."),c.close.forEach(M=>M.call(T,F)),r=ue(),n={code:"closed"},g(this),x||O(F)})});return n={code:"connecting",connection:w},w},disconnect(){a=!0,n.code==="open"&&n.connection.close()},onWebSocket(o,l){if(o==="message"){let w=function(y){if(typeof y.data!="string")return l.call(this,y);try{return l.call(this,JSON.parse(y.data))}catch{return l.call(this,y)}};return c[o].add(w),()=>c[o].delete(w)}return c[o].add(l),()=>c[o].delete(l)},sendMessage(o){if(n.code!=="open")throw new Error('Cannot send messages without an open connection. Make sure you are calling "await client.connect()".');if(typeof o=="string")return n.connection.send(o);"uid"in o||(o.uid=r.next().value),n.connection.send(JSON.stringify(o))},async subscribe(o,l={}){"uid"in l||(l.uid=r.next().value),i.add({...l,collection:o,type:"subscribe"}),n.code!=="open"&&(f("info","No connection available for subscribing!"),await this.connect()),this.sendMessage({...l,collection:o,type:"subscribe"});let w=!0;async function*y(){for(;w&&n.code==="open";){let x=await Z(n.connection).catch(()=>{});if(x){if("type"in x&&"status"in x&&x.type==="subscribe"&&x.status==="error")throw x;"type"in x&&"uid"in x&&x.type==="subscription"&&x.uid===l.uid&&(yield x)}}e.reconnect&&s.active&&(await s.active,n.code==="open"&&(n.connection.send(JSON.stringify({...l,collection:o,type:"subscribe"})),yield*y()))}let O=()=>{i.delete({...l,collection:o,type:"subscribe"}),this.sendMessage({uid:l.uid,type:"unsubscribe"}),w=!1};return{subscription:y(),unsubscribe:O}}}}}function ve(e){return["directus_access","directus_activity","directus_collections","directus_comments","directus_fields","directus_files","directus_folders","directus_migrations","directus_permissions","directus_policies","directus_presets","directus_relations","directus_revisions","directus_roles","directus_sessions","directus_settings","directus_users","directus_webhooks","directus_dashboards","directus_panels","directus_notifications","directus_shares","directus_flows","directus_operations","directus_translations","directus_versions","directus_extensions"].includes(e)}var Qt=(e,t,r)=>()=>{let n=String(e);if(ve(n))throw new Error("Cannot use createItem for core collections");return{path:`/items/${n}`,params:r??{},body:JSON.stringify(t),method:"POST"}},pt=e=>{let t=(r,n=[])=>{if(typeof r=="object"){let s=[];for(let a in r){let i=r[a]??[];if(Array.isArray(i))for(let p of i)s.push(t(p,[...n,a]));else if(typeof i=="object")for(let p of Object.keys(i)){let f=i[p];for(let h of f)s.push(t(h,[...n,`${a}:${p}`]))}}return s.flatMap(a=>a)}return[...n,String(r)].join(".")};return e.flatMap(r=>t(r))},ht=e=>{let t={};Array.isArray(e.fields)&&e.fields.length>0&&(t.fields=pt(e.fields).join(",")),e.filter&&Object.keys(e.filter).length>0&&(t.filter=JSON.stringify(e.filter)),e.search&&(t.search=e.search),"sort"in e&&e.sort&&(t.sort=typeof e.sort=="string"?e.sort:e.sort.join(",")),typeof e.limit=="number"&&e.limit>=-1&&(t.limit=String(e.limit)),typeof e.offset=="number"&&e.offset>=0&&(t.offset=String(e.offset)),typeof e.page=="number"&&e.page>=1&&(t.page=String(e.page)),e.deep&&Object.keys(e.deep).length>0&&(t.deep=JSON.stringify(e.deep)),e.alias&&Object.keys(e.alias).length>0&&(t.alias=JSON.stringify(e.alias)),e.aggregate&&Object.keys(e.aggregate).length>0&&(t.aggregate=JSON.stringify(e.aggregate)),e.groupBy&&e.groupBy.length>0&&(t.groupBy=e.groupBy.join(","));for(let[r,n]of Object.entries(e))r in t||(typeof n=="string"||typeof n=="number"||typeof n=="boolean"?t[r]=String(n):t[r]=JSON.stringify(n));return t},I=(e,t)=>{if(e.length===0)throw new Error(t)},ne=(e,t)=>{if(ve(String(e)))throw new Error(t)},Xt=(e,t)=>()=>(I(String(e),"Collection cannot be empty"),ne(e,"Cannot use readItems for core collections"),{path:`/items/${e}`,params:t??{},method:"GET"}),Zt=(e,t,r)=>()=>(I(String(e),"Collection cannot be empty"),ne(e,"Cannot use readItem for core collections"),I(String(t),"Key cannot be empty"),{path:`/items/${e}/${t}`,params:r??{},method:"GET"}),mt=e=>()=>({path:"/users/me",params:e??{},method:"GET"}),en=(e,t,r,n)=>()=>(I(String(t),"Key cannot be empty"),I(String(e),"Collection cannot be empty"),ne(e,"Cannot use updateItem for core collections"),{path:`/items/${e}/${t}`,params:n??{},body:JSON.stringify(r),method:"PATCH"}),tn=(e,t,r)=>()=>(I(e,"Key cannot be empty"),{path:`/users/${e}`,params:r??{},body:JSON.stringify(t),method:"PATCH"}),gt=(e,t,r={})=>()=>({path:"/users/register",method:"POST",body:JSON.stringify({email:e,password:t,...r})}),yt={},wt=(e={})=>t=>{let r={...yt,...e};return{async request(n){let s=n();if(s.headers||(s.headers={}),"Content-Type"in s.headers?s.headers["Content-Type"]==="multipart/form-data"&&delete s.headers["Content-Type"]:s.headers["Content-Type"]="application/json","getToken"in this&&!("Authorization"in s.headers)){let f=await this.getToken();f&&(s.headers.Authorization=`Bearer ${f}`)}let a=K(t.url,s.path,s.params),i={method:s.method??"GET",headers:s.headers??{}};"credentials"in r&&(i.credentials=r.credentials),s.body&&(i.body=s.body),s.onRequest&&(i=await s.onRequest(i)),r.onRequest&&(i=await r.onRequest(i));let p=await H(a.toString(),i,t.globals.fetch);return"onResponse"in s&&(p=await s.onResponse(p,i)),"onResponse"in e&&(p=await e.onResponse(p,i)),p}}};const ee=A(null),L=ut("https://schooldb.chromatone.center/").with(ct("cookie",{credentials:"include",autoRefresh:!0})).with(wt({credentials:"include"}));function be(){de(async()=>{L.refresh(),await L.getToken()&&r()});const e=A(!1);async function t(s,a,i){s?(await L.login(a,i),r()):(await L.request(gt(a,i)),e.value=!0)}async function r(){ee.value=await L.request(mt())}async function n(){await L.logout(),ee.value=null}return{user:ee,userDB:L,auth:t,logout:n,registered:e}}const vt={class:"bg-light-300 rounded-2xl shadow-xl overflow-hidden max-w-30ch mx-2"},bt={key:0,class:"p-4 flex flex-col gap-2"},_t={class:"flex gap-2 items-center p-2"},xt=["src"],St={class:"flex flex-col"},kt={class:"text-2xl"},Tt={class:"text-xs op-50"},At={class:"flex flex-wrap gap-2"},Et={class:"text-2xl p-4"},Ct={class:"p-2 border-2 bg-orange-400 rounded-xl mx-2 shadow-lg hover-brightness-120",type:"submit"},Ot={key:0,class:"bg-orange-200 mx-2 rounded-lg p-2"},$t={class:"flex gap-1 bg-light-900 p-3"},jt={class:"op-50"},Nt={__name:"AuthForm",setup(e){const t=A(""),r=A(""),n=A(!0),{user:s,userDB:a,auth:i,logout:p,registered:f}=be();return z(f,h=>n.value=h),(h,d)=>{var g,c,m,v;return E(),C("div",vt,[S(s)?(E(),C("div",bt,[_("div",_t,[(g=S(s))!=null&&g.avatar?(E(),C("img",{key:0,class:"rounded-full",src:`https://schooldb.chromatone.center/assets/${S(s).avatar}?width=50&height=50`},null,8,xt)):D("",!0),_("div",St,[_("div",kt,R((c=S(s))==null?void 0:c.first_name)+" "+R((m=S(s))==null?void 0:m.last_name),1),_("div",Tt,R((v=S(s))==null?void 0:v.location),1)])]),_("div",At,[d[5]||(d[5]=_("a",{class:"no-underline p-2 bg-light-500 rounded-lg hover-bg-light-100",href:"/student"},"My page",-1)),_("button",{class:"p-2 bg-light-500 rounded-lg hover-bg-light-100",onClick:d[0]||(d[0]=u=>S(p)())},"Logout")])])):(E(),C("form",{key:1,class:"flex flex-col gap-2",onSubmit:d[4]||(d[4]=Ee(u=>S(i)(n.value,t.value,r.value),["prevent","stop"]))},[_("div",Et,R(n.value?"Sign In":"Sign Up"),1),d[9]||(d[9]=_("label",{class:"px-2",for:"email"},"Email",-1)),te(_("input",{class:"mx-2",id:"email",type:"email","onUpdate:modelValue":d[1]||(d[1]=u=>t.value=u),placeholder:"Your email"},null,512),[[re,t.value]]),d[10]||(d[10]=_("label",{class:"px-2",for:"password"},"Password",-1)),te(_("input",{class:"mx-2",id:"password",type:"password","onUpdate:modelValue":d[2]||(d[2]=u=>r.value=u),placeholder:"Your password"},null,512),[[re,r.value]]),_("button",Ct,R(n.value?"LOGIN":"REGISTER"),1),q(ye,{name:"fade"},{default:ge(()=>[S(f)?(E(),C("div",Ot,[d[6]||(d[6]=se("Account successfully registered. Check your email ")),_("b",null,R(t.value),1),d[7]||(d[7]=se(" for activation link. After activation you can login at any time."))])):D("",!0)]),_:1}),_("div",$t,[_("div",jt,R(n.value?"Don't have an account?":"Already have an account?"),1),d[8]||(d[8]=_("div",{class:"flex-1"},null,-1)),_("a",{class:"cursor-pointer underline",onClick:d[3]||(d[3]=u=>n.value=!n.value)},R(n.value?"Register":"Login"),1)])],32))])}}},Mt=Ae(Nt,[["__scopeId","data-v-b29e24ad"]]),Rt="/smooth.svg",Ft="/photo.jpeg",Lt={class:"flex flex-wrap items-stretch w-full justify-stretch relative"},Dt=["src"],It={key:1,class:"i-la-user"},Pt={class:"flex flex-wrap bg-light-400 z-20 w-full"},Jt={key:0,class:"text-xl font-bold"},Wt={key:1,class:"text-sm op-80"},Ut={key:1,class:"w-full rounded-xl m-2 z-11",src:Ft,style:{flex:"1 0 300px"}},zt={key:0,class:"max-w-100vw w-full sticky bottom-0",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d31619.23403019168!2d98.33620267822933!3d7.8526906901330715!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30502f11be80d1b3%3A0xc8c70cc2395f418a!2sPLACE%20COWORKING%20PHUKET!5e0!3m2!1sru!2sth!4v1734540603134!5m2!1sru!2sth",width:"600",height:"450",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},Bt={__name:"Layout",setup(e){const{frontmatter:t}=Ce(),r=A(!1),{user:n}=be(),s=A();return Be(s,()=>{r.value=!1}),(a,i)=>{var f,h,d,g,c,m,v,u;const p=Oe("content");return E(),C("div",Lt,[_("button",{class:"op-50 fixed top-4 right-4 z-100 text-2xl p-2 rounded-full bg-light-400",onClick:i[0]||(i[0]=o=>r.value=!r.value)},[(f=S(n))!=null&&f.avatar?(E(),C("img",{key:0,class:"rounded-full",src:`https://schooldb.chromatone.center/assets/${S(n).avatar}?width=40&height=40`},null,8,Dt)):(E(),C("div",It))]),q(ye,{name:"fade"},{default:ge(()=>[te(q(Mt,{class:"fixed top-4 right-4 z-90",ref_key:"authModal",ref:s},null,512),[[$e,r.value]])]),_:1}),_("div",Pt,[i[2]||(i[2]=je('<div class="flex-1 z-9 p-4 bg-orange m-2 rounded-xl flex flex-col gap-1 max-w-50ch"><a class="flex gap-2 items-center" href="https://chromatone.center/" target="_blank"><img class="w-6 h-6" src="'+Rt+'"><div class="font-bold">Chromatone</div></a><div class="flex-1 min-h-12"></div><a class="text-6xl font-thin" href="/">Visual <br>Music<br> School</a><a class="op-80 text-md" href="/#how-to-find-us">Place Coworking<br> <div class="op-80">Phuket, Thailand</div></a></div>',1)),(h=S(t))!=null&&h.home?D("",!0):(E(),C("a",{key:0,class:"flex-1 p-4 flex items-start flex-col m-2 rounded-xl z-9",href:"#",style:Ne({backgroundColor:(d=S(t))==null?void 0:d.color})},[i[1]||(i[1]=_("div",{class:"flex-1"},null,-1)),(g=S(t))!=null&&g.title?(E(),C("div",Jt,R(S(t).title),1)):D("",!0),(c=S(t))!=null&&c.description?(E(),C("div",Wt,R((m=S(t))==null?void 0:m.description),1)):D("",!0)],4)),(v=S(t))!=null&&v.home?(E(),C("img",Ut)):D("",!0)]),q(p,{class:"prose max-w-unset content bg-light-300 z-10",style:{flex:"1 1 100%"}}),(u=S(t))!=null&&u.home?(E(),C("iframe",zt)):D("",!0)])}}},nn={Layout:Bt,enhanceApp({app:e,router:t,siteData:r}){}};export{Mt as A,wt as F,Xt as G,Zt as K,nn as R,Qt as U,tn as _,be as a,en as b,qt as c,Gt as d,ut as l,Ht as p,Kt as u,Yt as v};
