import{V as g,r as i,W as m,M as w,l as b}from"./framework.BW-R4Th-.js";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const W=()=>{};function A(v,r,s){let a;g(s)?a={evaluating:s}:a={};const{lazy:n=!1,evaluating:e=void 0,shallow:h=!0,onError:p=W}=a,u=i(!n),l=h?m(r):i(r);let t=0;return w(async d=>{if(!u.value)return;t++;const c=t;let f=!1;e&&Promise.resolve().then(()=>{e.value=!0});try{const o=await v(y=>{d(()=>{e&&(e.value=!1),f||y()})});c===t&&(l.value=o)}catch(o){p(o)}finally{e&&c===t&&(e.value=!1),f=!0}}),n?b(()=>(u.value=!0,l.value)):l}export{A as c};
