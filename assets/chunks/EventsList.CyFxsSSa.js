import{a0 as f,o as h,f as o,h as a,p as _,q as x,k as c,G as g,H as b,I as y,u as n,j as t,t as i,C as w,a1 as k}from"./framework.BrhOyqmp.js";import{u as E}from"./useWS.BsPAOI24.js";import{u as C}from"./useHash.mPwdT7Su.js";import{f as d}from"./format.BLmWzEp7.js";import"./theme.DwfYwzmn.js";const H={class:"flex gap-4 py-8 overflow-x-scroll max-w-100vw min-h-40"},M={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},j=["href"],B={class:"flex w-full font-mono p-2"},N={class:"text-sm"},S={class:"text-sm"},V=["src"],q={class:"flex items-start gap-2"},z={class:"op-60"},G={class:"px-2 py-1 bg-light-800 rounded-lg text-xs uppercase"},T={__name:"EventsList",setup(L){const{ws:u}=E(),r=f([]),m=C();return h(async()=>{const{subscription:l}=await u.subscribe("events",{uid:"events-list-sub",query:{sort:["date"],fields:["*","module.title","course.level","course.teacher.*","course.program.title","course.program.color"]}});for await(const e of l)switch(e.event){case"init":Object.assign(r,e.data);break;case"update":e.data.forEach(s=>Object.assign(r.find(p=>p.id==s.id),s));break}}),(l,e)=>(o(),a("div",H,[_(k,{name:"fade"},{default:x(()=>[r.length==0?(o(),a("div",M)):c("",!0),(o(!0),a(g,null,b(r,s=>(o(),a("a",{class:y(["no-underline shadow-lg flex flex-col rounded-xl transition",{[n(m)==s.id?"bg-orange-200":"bg-light-200"]:!0}]),key:s.id,href:`#${s.id}`,style:{flex:"1 0 220px"}},[t("div",B,[t("div",N,i(n(d)(s.date," HH:mm EEE")),1),e[0]||(e[0]=t("div",{class:"flex-1"},null,-1)),t("div",S,i(n(d)(s.date,"dd MMM yy")),1)]),s!=null&&s.cover?(o(),a("img",{key:0,src:`https://schooldb.chromatone.center/assets/${s.cover}`},null,8,V)):c("",!0),t("div",{class:"flex flex-col p-2 bg-cover bg-center",style:w({backgroundColor:s==null?void 0:s.color})},[t("div",q,[t("div",z,i(s==null?void 0:s.title),1),t("div",G,i(s==null?void 0:s.type),1)])],4)],10,j))),128))]),_:1})]))}};export{T as default};
