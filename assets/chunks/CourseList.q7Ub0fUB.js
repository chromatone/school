import{y as p,o as _,b as o,d as i,e as s,t as l,k as m,l as x,g,F as r,f as h,n as b,u as d,S as v}from"./framework.B-l7dn_f.js";import{u as w}from"./useWS.DNh_o_hL.js";import{u as y}from"./index.B_32Wq_7.js";import{u as k}from"./theme.CgoePaCd.js";const C={class:"text-2xl flex py-2 mt-8"},B={class:"op-80"},S={class:"flex flex-wrap gap-4 py-8"},N={class:"i-la-spinner text-4xl animate-spin absolute",key:"spinner"},T=["href"],V={class:"text-2xl flex flex-wrap items-baseline gap-2"},j={class:"op-70"},E={class:"px-2 py-1 bg-light-800 rounded-lg text-sm"},F={class:"flex w-full"},H={class:"text-sm"},L={class:"text-left p-2 rounded-xl shadow bg-light-200"},G={__name:"CourseList",setup(O){const{ws:c}=w(),a=p([]);_(async()=>{const{subscription:n}=await c.subscribe("courses",{uid:"courses-list-sub",query:{sort:["start_date"],fields:["*","program.title","classes.*","classes.module.title"]}});for await(const t of n)switch(t.event){case"init":Object.assign(a,t.data);break;case"update":t.data.forEach(e=>Object.assign(a.find(f=>f.id==e.id),e));break}});const u=k();return(n,t)=>(o(),i(r,null,[s("div",C,[t[0]||(t[0]=s("div",{class:"font-bold"},"Current courses",-1)),t[1]||(t[1]=s("div",{class:"flex-1"},null,-1)),s("div",B,l(a.length),1)]),s("div",S,[m(v,{name:"fade"},{default:x(()=>[a.length==0?(o(),i("div",N)):g("",!0),(o(!0),i(r,null,h(a,e=>(o(),i("a",{class:b(["no-underline shadow-lg p-4 flex flex-col rounded-xl bg-light-700 gap-2 flex-1",{"bg-light-500":e.id==d(u)}]),key:e.id,href:`/courses/#${e.id}`},[s("div",V,[s("div",j,l(e.program.title),1),s("div",E,l(e.level),1)]),s("div",F,[s("div",H,"Starts "+l(d(y)(e.start_date)),1),t[2]||(t[2]=s("div",{class:"flex-1"},null,-1))]),s("button",L,l(e.classes_count)+" weekly classes - 2400 THB",1)],10,T))),128))]),_:1})])],64))}};export{G as default};
